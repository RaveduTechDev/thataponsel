var Gs=(M,$)=>()=>($||M(($={exports:{}}).exports,$),$.exports);var Fs=Gs((lt,Je)=>{/*!
 * FilePondPluginFileValidateSize 2.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(M,$){typeof lt=="object"&&typeof Je<"u"?Je.exports=$():typeof define=="function"&&define.amd?define($):(M=M||self).FilePondPluginFileValidateSize=$()})(void 0,function(){var M=function($){var qe=$.addFilter,De=$.utils,Y=De.Type,Se=De.replaceInString,te=De.toNaturalFileSize;return qe("ALLOW_HOPPER_ITEM",function(ne,he){var K=he.query;if(!K("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;var Ie=K("GET_MAX_FILE_SIZE");if(Ie!==null&&ne.size>Ie)return!1;var Ce=K("GET_MIN_FILE_SIZE");return!(Ce!==null&&ne.size<Ce)}),qe("LOAD_FILE",function(ne,he){var K=he.query;return new Promise(function(Ie,Ce){if(!K("GET_ALLOW_FILE_SIZE_VALIDATION"))return Ie(ne);var V=K("GET_FILE_VALIDATE_SIZE_FILTER");if(V&&!V(ne))return Ie(ne);var fe=K("GET_MAX_FILE_SIZE");if(fe!==null&&ne.size>fe)Ce({status:{main:K("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:Se(K("GET_LABEL_MAX_FILE_SIZE"),{filesize:te(fe,".",K("GET_FILE_SIZE_BASE"),K("GET_FILE_SIZE_LABELS",K))})}});else{var oe=K("GET_MIN_FILE_SIZE");if(oe!==null&&ne.size<oe)Ce({status:{main:K("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:Se(K("GET_LABEL_MIN_FILE_SIZE"),{filesize:te(oe,".",K("GET_FILE_SIZE_BASE"),K("GET_FILE_SIZE_LABELS",K))})}});else{var ie=K("GET_MAX_TOTAL_FILE_SIZE");if(ie!==null&&K("GET_ACTIVE_ITEMS").reduce(function(Me,_e){return Me+_e.fileSize},0)>ie)return void Ce({status:{main:K("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:Se(K("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:te(ie,".",K("GET_FILE_SIZE_BASE"),K("GET_FILE_SIZE_LABELS",K))})}});Ie(ne)}}})}),{options:{allowFileSizeValidation:[!0,Y.BOOLEAN],maxFileSize:[null,Y.INT],minFileSize:[null,Y.INT],maxTotalFileSize:[null,Y.INT],fileValidateSizeFilter:[null,Y.FUNCTION],labelMinFileSizeExceeded:["File is too small",Y.STRING],labelMinFileSize:["Minimum file size is {filesize}",Y.STRING],labelMaxFileSizeExceeded:["File is too large",Y.STRING],labelMaxFileSize:["Maximum file size is {filesize}",Y.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",Y.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",Y.STRING]}}};return typeof window<"u"&&window.document!==void 0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:M})),M});/*!
 * FilePondPluginFileValidateType 1.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(M,$){typeof lt=="object"&&typeof Je<"u"?Je.exports=$():typeof define=="function"&&define.amd?define($):(M=M||self).FilePondPluginFileValidateType=$()})(void 0,function(){var M=function($){var qe=$.addFilter,De=$.utils,Y=De.Type,Se=De.isString,te=De.replaceInString,ne=De.guesstimateMimeType,he=De.getExtensionFromFilename,K=De.getFilenameFromURL,Ie=function(V,fe){return V.some(function(oe){return/\*$/.test(oe)?(ie=oe,(/^[^/]+/.exec(fe)||[]).pop()===ie.slice(0,-2)):oe===fe;var ie})},Ce=function(V,fe,oe){if(fe.length===0)return!0;var ie=function(Me){var _e="";if(Se(Me)){var Fe=K(Me),Ke=he(Fe);Ke&&(_e=ne(Ke))}else _e=Me.type;return _e}(V);return oe?new Promise(function(Me,_e){oe(V,ie).then(function(Fe){Ie(fe,Fe)?Me():_e()}).catch(_e)}):Ie(fe,ie)};return qe("SET_ATTRIBUTE_TO_OPTION_MAP",function(V){return Object.assign(V,{accept:"acceptedFileTypes"})}),qe("ALLOW_HOPPER_ITEM",function(V,fe){var oe=fe.query;return!oe("GET_ALLOW_FILE_TYPE_VALIDATION")||Ce(V,oe("GET_ACCEPTED_FILE_TYPES"))}),qe("LOAD_FILE",function(V,fe){var oe=fe.query;return new Promise(function(ie,Me){if(oe("GET_ALLOW_FILE_TYPE_VALIDATION")){var _e=oe("GET_ACCEPTED_FILE_TYPES"),Fe=oe("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),Ke=Ce(V,_e,Fe),je=function(){var be,Xe=_e.map((be=oe("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"),function(We){return be[We]!==null&&(be[We]||We)})).filter(function(We){return We!==!1}),Qe=Xe.filter(function(We,mt){return Xe.indexOf(We)===mt});Me({status:{main:oe("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:te(oe("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:Qe.join(", "),allButLastType:Qe.slice(0,-1).join(", "),lastType:Qe[Xe.length-1]})}})};if(typeof Ke=="boolean")return Ke?ie(V):je();Ke.then(function(){ie(V)}).catch(je)}else ie(V)})}),{options:{allowFileTypeValidation:[!0,Y.BOOLEAN],acceptedFileTypes:[[],Y.ARRAY],labelFileTypeNotAllowed:["Jenis file tidak valid",Y.STRING],fileValidateTypeLabelExpectedTypes:["{allButLastType}, {lastType}",Y.STRING],fileValidateTypeLabelExpectedTypesMap:[{},Y.OBJECT],fileValidateTypeDetectType:[null,Y.FUNCTION]}}};return typeof window<"u"&&window.document!==void 0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:M})),M});/*!
 * FilePondPluginImageCrop 2.0.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(M,$){typeof lt=="object"&&typeof Je<"u"?Je.exports=$():typeof define=="function"&&define.amd?define($):(M=M||self).FilePondPluginImageCrop=$()})(void 0,function(){var M=function(qe){return/^image/.test(qe.type)},$=function(qe){var De=qe.addFilter,Y=qe.utils,Se=Y.Type,te=Y.isFile,ne=Y.getNumericAspectRatioFromString,he=function(V,fe){return!(!M(V.file)||!fe("GET_ALLOW_IMAGE_CROP"))},K=function(V){return typeof V=="object"},Ie=function(V){return typeof V=="number"},Ce=function(V,fe){return V.setMetadata("crop",Object.assign({},V.getMetadata("crop"),fe))};return De("DID_CREATE_ITEM",function(V,fe){var oe=fe.query;V.extend("setImageCrop",function(ie){if(he(V,oe)&&K(center))return V.setMetadata("crop",ie),ie}),V.extend("setImageCropCenter",function(ie){if(he(V,oe)&&K(ie))return Ce(V,{center:ie})}),V.extend("setImageCropZoom",function(ie){if(he(V,oe)&&Ie(ie))return Ce(V,{zoom:Math.max(1,ie)})}),V.extend("setImageCropRotation",function(ie){if(he(V,oe)&&Ie(ie))return Ce(V,{rotation:ie})}),V.extend("setImageCropFlip",function(ie){if(he(V,oe)&&K(ie))return Ce(V,{flip:ie})}),V.extend("setImageCropAspectRatio",function(ie){if(he(V,oe)&&ie!==void 0){var Me=V.getMetadata("crop"),_e=ne(ie),Fe={center:{x:.5,y:.5},flip:Me?Object.assign({},Me.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:_e};return V.setMetadata("crop",Fe),Fe}})}),De("DID_LOAD_ITEM",function(V,fe){var oe=fe.query;return new Promise(function(ie,Me){var _e=V.file;if(!te(_e)||!M(_e)||!oe("GET_ALLOW_IMAGE_CROP")||V.getMetadata("crop"))return ie(V);var Fe=oe("GET_IMAGE_CROP_ASPECT_RATIO");V.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:Fe?ne(Fe):null}),ie(V)})}),{options:{allowImageCrop:[!0,Se.BOOLEAN],imageCropAspectRatio:[null,Se.STRING]}}};return typeof window<"u"&&window.document!==void 0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:$})),$});/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(M,$){typeof lt=="object"&&typeof Je<"u"?Je.exports=$():typeof define=="function"&&define.amd?define($):(M=M||self).FilePondPluginImageExifOrientation=$()})(void 0,function(){var M=65496,$=65505,qe=1165519206,De=18761,Y=274,Se=65280,te=function(V,fe){var oe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return V.getUint16(fe,oe)},ne=function(V,fe){var oe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return V.getUint32(fe,oe)},he=typeof window<"u"&&window.document!==void 0,K=void 0,Ie=he?new Image:{};Ie.onload=function(){return K=Ie.naturalWidth>Ie.naturalHeight},Ie.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";var Ce=function(V){var fe=V.addFilter,oe=V.utils,ie=oe.Type,Me=oe.isFile;return fe("DID_LOAD_ITEM",function(_e,Fe){var Ke=Fe.query;return new Promise(function(je,be){var Xe=_e.file;if(!(Me(Xe)&&function(Qe){return/^image\/jpeg/.test(Qe.type)}(Xe)&&Ke("GET_ALLOW_IMAGE_EXIF_ORIENTATION")&&K))return je(_e);(function(Qe){return new Promise(function(We,mt){var pt=new FileReader;pt.onload=function(Ut){var Ne=new DataView(Ut.target.result);if(te(Ne,0)===M){for(var xt=Ne.byteLength,ke=2;ke<xt;){var St=te(Ne,ke);if(ke+=2,St===$){if(ne(Ne,ke+=2)!==qe)break;var vt=te(Ne,ke+=6)===De;ke+=ne(Ne,ke+4,vt);var Vt=te(Ne,ke,vt);ke+=2;for(var Be=0;Be<Vt;Be++)if(te(Ne,ke+12*Be,vt)===Y)return void We(te(Ne,ke+12*Be+8,vt))}else{if((St&Se)!==Se)break;ke+=te(Ne,ke)}}We(-1)}else We(-1)},pt.readAsArrayBuffer(Qe.slice(0,65536))})})(Xe).then(function(Qe){_e.setMetadata("exif",{orientation:Qe}),je(_e)})})}),{options:{allowImageExifOrientation:[!0,ie.BOOLEAN]}}};return typeof window<"u"&&window.document!==void 0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ce})),Ce});/*!
 * FilePondPluginImageFilter 1.0.1
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(M,$){typeof lt=="object"&&typeof Je<"u"?Je.exports=$():typeof define=="function"&&define.amd?define($):(M=M||self).FilePondPluginImageFilter=$()})(void 0,function(){var M=function($){var qe=$.addFilter,De=$.utils.Type;return qe("DID_LOAD_ITEM",function(Y,Se){var te=Se.query;return new Promise(function(ne,he){if(!function(Ie){return/^image/.test(Ie.type)}(Y.file)||!te("GET_ALLOW_IMAGE_FILTER"))return ne(Y);var K=te("GET_IMAGE_FILTER_COLOR_MATRIX");if(!K||K.length!==20)return ne(Y);Y.setMetadata("filter",K),ne(Y)})}),{options:{allowImageFilter:[!0,De.BOOLEAN],imageFilterColorMatrix:[null,De.ARRAY]}}};return typeof window<"u"&&window.document!==void 0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:M})),M});/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(M,$){typeof lt=="object"&&typeof Je<"u"?Je.exports=$():typeof define=="function"&&define.amd?define($):(M=M||self).FilePondPluginImagePreview=$()})(void 0,function(){function M(p,v){return $(p)||function(I,T){var j=[],D=!0,G=!1,N=void 0;try{for(var A,E=I[Symbol.iterator]();!(D=(A=E.next()).done)&&(j.push(A.value),!T||j.length!==T);D=!0);}catch(S){G=!0,N=S}finally{try{D||E.return==null||E.return()}finally{if(G)throw N}}return j}(p,v)||qe()}function $(p){if(Array.isArray(p))return p}function qe(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var De=function(p,v){return te(p.x*v,p.y*v)},Y=function(p,v){return te(p.x+v.x,p.y+v.y)},Se=function(p,v,I){var T=Math.cos(v),j=Math.sin(v),D=te(p.x-I.x,p.y-I.y);return te(I.x+T*D.x-j*D.y,I.y+j*D.x+T*D.y)},te=function(){return{x:arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,y:arguments.length>1&&arguments[1]!==void 0?arguments[1]:0}},ne=function(p,v){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,T=arguments.length>3?arguments[3]:void 0;return typeof p=="string"?parseFloat(p)*I:typeof p=="number"?p*(T?v[T]:Math.min(v.width,v.height)):void 0},he=function(p){return p!=null},K=function(p,v){return Object.keys(v).forEach(function(I){return p.setAttribute(I,v[I])})},Ie=function(p,v){var I=document.createElementNS("http://www.w3.org/2000/svg",p);return v&&K(I,v),I},Ce={contain:"xMidYMid meet",cover:"xMidYMid slice"},V={left:"start",center:"middle",right:"end"},fe=function(p){return function(v){return Ie(p,{id:v.id})}},oe={image:function(p){var v=Ie("image",{id:p.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return v.onload=function(){v.setAttribute("opacity",p.opacity||1)},v.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.src),v},rect:fe("rect"),ellipse:fe("ellipse"),text:fe("text"),path:fe("path"),line:function(p){var v=Ie("g",{id:p.id,"stroke-linecap":"round","stroke-linejoin":"round"}),I=Ie("line");v.appendChild(I);var T=Ie("path");v.appendChild(T);var j=Ie("path");return v.appendChild(j),v}},ie={rect:function(p){return K(p,Object.assign({},p.rect,p.styles))},ellipse:function(p){var v=p.rect.x+.5*p.rect.width,I=p.rect.y+.5*p.rect.height,T=.5*p.rect.width,j=.5*p.rect.height;return K(p,Object.assign({cx:v,cy:I,rx:T,ry:j},p.styles))},image:function(p,v){K(p,Object.assign({},p.rect,p.styles,{preserveAspectRatio:Ce[v.fit]||"none"}))},text:function(p,v,I,T){var j=ne(v.fontSize,I,T),D=v.fontFamily||"sans-serif",G=v.fontWeight||"normal",N=V[v.textAlign]||"start";K(p,Object.assign({},p.rect,p.styles,{"stroke-width":0,"font-weight":G,"font-size":j,"font-family":D,"text-anchor":N})),p.text!==v.text&&(p.text=v.text,p.textContent=v.text.length?v.text:" ")},path:function(p,v,I,T){var j;K(p,Object.assign({},p.styles,{fill:"none",d:(j=v.points.map(function(D){return{x:ne(D.x,I,T,"width"),y:ne(D.y,I,T,"height")}}),j.map(function(D,G){return"".concat(G===0?"M":"L"," ").concat(D.x," ").concat(D.y)}).join(" "))}))},line:function(p,v,I,T){K(p,Object.assign({},p.rect,p.styles,{fill:"none"}));var j=p.childNodes[0],D=p.childNodes[1],G=p.childNodes[2],N=p.rect,A={x:p.rect.x+p.rect.width,y:p.rect.y+p.rect.height};if(K(j,{x1:N.x,y1:N.y,x2:A.x,y2:A.y}),v.lineDecoration){D.style.display="none",G.style.display="none";var E=function(ee){var re=Math.sqrt(ee.x*ee.x+ee.y*ee.y);return re===0?{x:0,y:0}:te(ee.x/re,ee.y/re)}({x:A.x-N.x,y:A.y-N.y}),S=ne(.05,I,T);if(v.lineDecoration.indexOf("arrow-begin")!==-1){var b=De(E,S),w=Y(N,b),y=Se(N,2,w),X=Se(N,-2,w);K(D,{style:"display:block;",d:"M".concat(y.x,",").concat(y.y," L").concat(N.x,",").concat(N.y," L").concat(X.x,",").concat(X.y)})}if(v.lineDecoration.indexOf("arrow-end")!==-1){var k=De(E,-S),de=Y(A,k),le=Se(A,2,de),pe=Se(A,-2,de);K(G,{style:"display:block;",d:"M".concat(le.x,",").concat(le.y," L").concat(A.x,",").concat(A.y," L").concat(pe.x,",").concat(pe.y)})}}}},Me=function(p,v,I,T,j){v!=="path"&&(p.rect=function(D,G){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=ne(D.x,G,N,"width")||ne(D.left,G,N,"width"),E=ne(D.y,G,N,"height")||ne(D.top,G,N,"height"),S=ne(D.width,G,N,"width"),b=ne(D.height,G,N,"height"),w=ne(D.right,G,N,"width"),y=ne(D.bottom,G,N,"height");return he(E)||(E=he(b)&&he(y)?G.height-b-y:y),he(A)||(A=he(S)&&he(w)?G.width-S-w:w),he(S)||(S=he(A)&&he(w)?G.width-A-w:0),he(b)||(b=he(E)&&he(y)?G.height-E-y:0),{x:A||0,y:E||0,width:S||0,height:b||0}}(I,T,j)),p.styles=function(D,G,N){var A=D.borderStyle||D.lineStyle||"solid",E=D.backgroundColor||D.fontColor||"transparent",S=D.borderColor||D.lineColor||"transparent",b=ne(D.borderWidth||D.lineWidth,G,N);return{"stroke-linecap":D.lineCap||"round","stroke-linejoin":D.lineJoin||"round","stroke-width":b||0,"stroke-dasharray":typeof A=="string"?"":A.map(function(w){return ne(w,G,N)}).join(","),stroke:S,fill:E,opacity:D.opacity||1}}(I,T,j),ie[v](p,I,T,j)},_e=["x","y","left","top","right","bottom","width","height"],Fe=function(p){var v=M(p,2),I=v[0],T=v[1],j=T.points?{}:_e.reduce(function(D,G){var N;return D[G]=typeof(N=T[G])=="string"&&/%/.test(N)?parseFloat(N)/100:N,D},{});return[I,Object.assign({zIndex:0},T,j)]},Ke=function(p,v){return p[1].zIndex>v[1].zIndex?1:p[1].zIndex<v[1].zIndex?-1:0},je=function(p){return p.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:function(v){var I=v.root,T=v.props;if(T.dirty){var j=T.crop,D=T.resize,G=T.markup,N=T.width,A=T.height,E=j.width,S=j.height;if(D){var b=D.size,w=b&&b.width,y=b&&b.height,X=D.mode,k=D.upscale;w&&!y&&(y=w),y&&!w&&(w=y);var de=E<w&&S<y;if(!de||de&&k){var le,pe=w/E,ee=y/S;X==="force"?(E=w,S=y):(X==="cover"?le=Math.max(pe,ee):X==="contain"&&(le=Math.min(pe,ee)),E*=le,S*=le)}}var re={width:N,height:A};I.element.setAttribute("width",re.width),I.element.setAttribute("height",re.height);var Oe=Math.min(N/E,A/S);I.element.innerHTML="";var Pe=I.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");G.filter(Pe).map(Fe).sort(Ke).forEach(function(we){var Ze=M(we,2),Ue=Ze[0],ve=Ze[1],$e=function(xe,Ve){return oe[xe](Ve)}(Ue,ve);Me($e,Ue,ve,re,Oe),I.element.appendChild($e)})}}})},be=function(p,v){return{x:p,y:v}},Xe=function(p,v){return be(p.x-v.x,p.y-v.y)},Qe=function(p,v){return Math.sqrt(function(I,T){return function(j,D){return j.x*D.x+j.y*D.y}(Xe(I,T),Xe(I,T))}(p,v))},We=function(p,v){var I=p,T=v,j=1.5707963267948966-v,D=Math.sin(1.5707963267948966),G=Math.sin(T),N=Math.sin(j),A=Math.cos(j),E=I/D;return be(A*(E*G),A*(E*N))},mt=function(p,v,I,T){var j=T.x>.5?1-T.x:T.x,D=T.y>.5?1-T.y:T.y,G=2*j*p.width,N=2*D*p.height,A=function(E,S){var b=E.width,w=E.height,y=We(b,S),X=We(w,S),k=be(E.x+Math.abs(y.x),E.y-Math.abs(y.y)),de=be(E.x+E.width+Math.abs(X.y),E.y+Math.abs(X.x)),le=be(E.x-Math.abs(X.y),E.y+E.height-Math.abs(X.x));return{width:Qe(k,de),height:Qe(k,le)}}(v,I);return Math.max(A.width/G,A.height/N)},pt=function(p,v){var I=p.width,T=I*v;return T>p.height&&(I=(T=p.height)/v),{x:.5*(p.width-I),y:.5*(p.height-T),width:I,height:T}},Ut=function(p){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=v.zoom,T=v.rotation,j=v.center,D=v.aspectRatio;D||(D=p.height/p.width);var G=function(S,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,y=S.height/S.width,X=b,k=1,de=y;de>X&&(k=(de=X)/y);var le=Math.max(1/k,X/de),pe=S.width/(w*le*k);return{width:pe,height:pe*b}}(p,D,I),N={width:G.width,height:G.height},A=v.scaleToFit===void 0||v.scaleToFit,E=I*mt(p,pt(N,D),T,A?j:{x:.5,y:.5});return{widthFloat:G.width/E,heightFloat:G.height/E,width:Math.round(G.width/E),height:Math.round(G.height/E)}},Ne={type:"spring",stiffness:.5,damping:.45,mass:10},xt=function(p){return p.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function(v){var I=v.root,T=v.props;T.background&&(I.element.style.backgroundColor=T.background)},create:function(v){var I=v.root,T=v.props;I.ref.image=I.appendChildView(I.createChildView(function(D){return D.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:Ne,originY:Ne,scaleX:Ne,scaleY:Ne,translateX:Ne,translateY:Ne,rotateZ:Ne}},create:function(G){var N=G.root,A=G.props;A.width=A.image.width,A.height=A.image.height,N.ref.bitmap=N.appendChildView(N.createChildView(function(E){return E.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:function(S){var b=S.root,w=S.props;b.appendChild(w.image)}})}(D),{image:A.image}))},write:function(G){var N=G.root,A=G.props.crop.flip,E=N.ref.bitmap;E.scaleX=A.horizontal?-1:1,E.scaleY=A.vertical?-1:1}})}(p),Object.assign({},T))),I.ref.createMarkup=function(){I.ref.markup||(I.ref.markup=I.appendChildView(I.createChildView(je(p),Object.assign({},T))))},I.ref.destroyMarkup=function(){I.ref.markup&&(I.removeChildView(I.ref.markup),I.ref.markup=null)};var j=I.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");j!==null&&(I.element.dataset.transparencyIndicator=j==="grid"?j:"color")},write:function(v){var I=v.root,T=v.props,j=v.shouldOptimize,D=T.crop,G=T.markup,N=T.resize,A=T.dirty,E=T.width,S=T.height;I.ref.image.crop=D;var b={width:E,height:S,center:{x:.5*E,y:.5*S}},w={width:I.ref.image.width,height:I.ref.image.height},y={x:D.center.x*w.width,y:D.center.y*w.height},X={x:b.center.x-w.width*D.center.x,y:b.center.y-w.height*D.center.y},k=2*Math.PI+D.rotation%(2*Math.PI),de=D.aspectRatio||w.height/w.width,le=D.scaleToFit===void 0||D.scaleToFit,pe=mt(w,pt(b,de),k,le?D.center:{x:.5,y:.5}),ee=D.zoom*pe;G&&G.length?(I.ref.createMarkup(),I.ref.markup.width=E,I.ref.markup.height=S,I.ref.markup.resize=N,I.ref.markup.dirty=A,I.ref.markup.markup=G,I.ref.markup.crop=Ut(w,D)):I.ref.markup&&I.ref.destroyMarkup();var re=I.ref.image;if(j)return re.originX=null,re.originY=null,re.translateX=null,re.translateY=null,re.rotateZ=null,re.scaleX=null,void(re.scaleY=null);re.originX=y.x,re.originY=y.y,re.translateX=X.x,re.translateY=X.y,re.rotateZ=k,re.scaleX=ee,re.scaleY=ee}})},ke=0,St=function(){self.onmessage=function(p){createImageBitmap(p.data.message.file).then(function(v){self.postMessage({id:p.data.id,message:v},[v])})}},vt=function(){self.onmessage=function(p){for(var v=p.data.message.imageData,I=p.data.message.colorMatrix,T=v.data,j=T.length,D=I[0],G=I[1],N=I[2],A=I[3],E=I[4],S=I[5],b=I[6],w=I[7],y=I[8],X=I[9],k=I[10],de=I[11],le=I[12],pe=I[13],ee=I[14],re=I[15],Oe=I[16],Pe=I[17],we=I[18],Ze=I[19],Ue=0,ve=0,$e=0,xe=0,Ve=0;Ue<j;Ue+=4)ve=T[Ue]/255,$e=T[Ue+1]/255,xe=T[Ue+2]/255,Ve=T[Ue+3]/255,T[Ue]=Math.max(0,Math.min(255*(ve*D+$e*G+xe*N+Ve*A+E),255)),T[Ue+1]=Math.max(0,Math.min(255*(ve*S+$e*b+xe*w+Ve*y+X),255)),T[Ue+2]=Math.max(0,Math.min(255*(ve*k+$e*de+xe*le+Ve*pe+ee),255)),T[Ue+3]=Math.max(0,Math.min(255*(ve*re+$e*Oe+xe*Pe+Ve*we+Ze),255));self.postMessage({id:p.data.id,message:v},[v.data.buffer])}},Vt={1:function(){return[1,0,0,1,0,0]},2:function(p){return[-1,0,0,1,p,0]},3:function(p,v){return[-1,0,0,-1,p,v]},4:function(p,v){return[1,0,0,-1,0,v]},5:function(){return[0,1,1,0,0,0]},6:function(p,v){return[0,1,-1,0,v,0]},7:function(p,v){return[0,-1,-1,0,v,p]},8:function(p){return[0,-1,1,0,0,p]}},Be=function(p,v,I,T){v=Math.round(v),I=Math.round(I);var j=document.createElement("canvas");j.width=v,j.height=I;var D=j.getContext("2d");if(T>=5&&T<=8){var G=[I,v];v=G[0],I=G[1]}return function(N,A,E,S){S!==-1&&N.transform.apply(N,Vt[S](A,E))}(D,v,I,T),D.drawImage(p,0,0,v,I),j},$t=function(p){return/^image/.test(p.type)&&!/svg/.test(p.type)},dr=function(p){var v=Math.min(10/p.width,10/p.height),I=document.createElement("canvas"),T=I.getContext("2d"),j=I.width=Math.ceil(p.width*v),D=I.height=Math.ceil(p.height*v);T.drawImage(p,0,0,j,D);var G=null;try{G=T.getImageData(0,0,j,D).data}catch{return null}for(var N=G.length,A=0,E=0,S=0,b=0;b<N;b+=4)A+=G[b]*G[b],E+=G[b+1]*G[b+1],S+=G[b+2]*G[b+2];return{r:A=qt(A,N),g:E=qt(E,N),b:S=qt(S,N)}},qt=function(p,v){return Math.floor(Math.sqrt(p/(v/4)))},pr=function(p){var v=p.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:function(A){var E=A.root,S=A.props,b=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`;if(document.querySelector("base")){var w=new URL(window.location.href.replace(window.location.hash,"")).href;b=b.replace(/url\(\#/g,"url("+w+"#")}ke++,E.element.classList.add("filepond--image-preview-overlay-".concat(S.status)),E.element.innerHTML=b.replace(/__UID__/g,ke)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),I=function(A){return A.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:Ne,scaleY:Ne,translateY:Ne,opacity:{type:"tween",duration:400}}},create:function(E){var S=E.root,b=E.props;S.ref.clip=S.appendChildView(S.createChildView(xt(A),{id:b.id,image:b.image,crop:b.crop,markup:b.markup,resize:b.resize,dirty:b.dirty,background:b.background}))},write:function(E){var S=E.root,b=E.props,w=E.shouldOptimize,y=S.ref.clip,X=b.image,k=b.crop,de=b.markup,le=b.resize,pe=b.dirty;if(y.crop=k,y.markup=de,y.resize=le,y.dirty=pe,y.opacity=w?0:1,!w&&!S.rect.element.hidden){var ee=X.height/X.width,re=k.aspectRatio||ee,Oe=S.rect.inner.width,Pe=S.rect.inner.height,we=S.query("GET_IMAGE_PREVIEW_HEIGHT"),Ze=S.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),Ue=S.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),ve=S.query("GET_PANEL_ASPECT_RATIO"),$e=S.query("GET_ALLOW_MULTIPLE");ve&&!$e&&(we=Oe*ve,re=ve);var xe=we!==null?we:Math.max(Ze,Math.min(Oe*re,Ue)),Ve=xe/re;Ve>Oe&&(xe=(Ve=Oe)*re),xe>Pe&&(xe=Pe,Ve=Pe/re),y.width=Ve,y.height=xe}}})}(p),T=p.utils.createWorker,j=function(A,E,S){return new Promise(function(b){A.ref.imageData||(A.ref.imageData=S.getContext("2d").getImageData(0,0,S.width,S.height));var w=function(X){var k;try{k=new ImageData(X.width,X.height)}catch{k=document.createElement("canvas").getContext("2d").createImageData(X.width,X.height)}return k.data.set(new Uint8ClampedArray(X.data)),k}(A.ref.imageData);if(!E||E.length!==20)return S.getContext("2d").putImageData(w,0,0),b();var y=T(vt);y.post({imageData:w,colorMatrix:E},function(X){S.getContext("2d").putImageData(X,0,0),y.terminate(),b()},[w.data.buffer])})},D=function(A){var E=A.root,S=A.props,b=A.image,w=S.id,y=E.query("GET_ITEM",{id:w});if(y){var X,k,de=y.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},le=E.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),pe=!1;E.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(X=y.getMetadata("markup")||[],k=y.getMetadata("resize"),pe=!0);var ee=E.appendChildView(E.createChildView(I,{id:w,image:b,crop:de,resize:k,markup:X,dirty:pe,background:le,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),E.childViews.length);E.ref.images.push(ee),ee.opacity=1,ee.scaleX=1,ee.scaleY=1,ee.translateY=0,setTimeout(function(){E.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:w})},250)}},G=function(A){var E=A.root;E.ref.overlayShadow.opacity=1,E.ref.overlayError.opacity=0,E.ref.overlaySuccess.opacity=0},N=function(A){var E=A.root;E.ref.overlayShadow.opacity=.25,E.ref.overlayError.opacity=1};return p.utils.createView({name:"image-preview-wrapper",create:function(A){var E=A.root;E.ref.images=[],E.ref.imageData=null,E.ref.imageViewBin=[],E.ref.overlayShadow=E.appendChildView(E.createChildView(v,{opacity:0,status:"idle"})),E.ref.overlaySuccess=E.appendChildView(E.createChildView(v,{opacity:0,status:"success"})),E.ref.overlayError=E.appendChildView(E.createChildView(v,{opacity:0,status:"failure"}))},styles:["height"],apis:["height"],destroy:function(A){A.root.ref.images.forEach(function(E){E.image.width=1,E.image.height=1})},didWriteView:function(A){A.root.ref.images.forEach(function(E){E.dirty=!1})},write:p.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:function(A){var E=A.root,S=E.ref.images[E.ref.images.length-1];S.translateY=0,S.scaleX=1,S.scaleY=1,S.opacity=1},DID_IMAGE_PREVIEW_CONTAINER_CREATE:function(A){var E=A.root,S=A.props.id,b=E.query("GET_ITEM",S);if(b){var w,y,X,k=URL.createObjectURL(b.file);w=k,y=function(de,le){E.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:S,width:de,height:le})},(X=new Image).onload=function(){var de=X.naturalWidth,le=X.naturalHeight;X=null,y(de,le)},X.src=w}},DID_FINISH_CALCULATE_PREVIEWSIZE:function(A){var E=A.root,S=A.props,b=S.id,w=E.query("GET_ITEM",b);if(w){var y,X,k=URL.createObjectURL(w.file),de=function(){var ee;(ee=k,new Promise(function(re,Oe){var Pe=new Image;Pe.crossOrigin="Anonymous",Pe.onload=function(){re(Pe)},Pe.onerror=function(we){Oe(we)},Pe.src=ee})).then(le)},le=function(ee){URL.revokeObjectURL(k);var re=(w.getMetadata("exif")||{}).orientation||-1,Oe=ee.width,Pe=ee.height;if(Oe&&Pe){if(re>=5&&re<=8){var we=[Pe,Oe];Oe=we[0],Pe=we[1]}var Ze=Math.max(1,.75*window.devicePixelRatio),Ue=E.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*Ze,ve=Pe/Oe,$e=E.rect.element.width,xe=E.rect.element.height,Ve=$e,It=Ve*ve;ve>1?It=(Ve=Math.min(Oe,$e*Ue))*ve:Ve=(It=Math.min(Pe,xe*Ue))/ve;var Pt=Be(ee,Ve,It,re),Tt=function(){var Yt=E.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?dr(data):null;w.setMetadata("color",Yt,!0),"close"in ee&&ee.close(),E.ref.overlayShadow.opacity=1,D({root:E,props:S,image:Pt})},Lt=w.getMetadata("filter");Lt?j(E,Lt,Pt).then(Tt):Tt()}};if(y=w.file,!(((X=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./))?parseInt(X[1]):null)<=58)&&"createImageBitmap"in window&&$t(y)){var pe=T(St);pe.post({file:w.file},function(ee){pe.terminate(),ee?le(ee):de()})}else de()}},DID_UPDATE_ITEM_METADATA:function(A){var E=A.root,S=A.props,b=A.action;if(/crop|filter|markup|resize/.test(b.change.key)&&E.ref.images.length){var w=E.query("GET_ITEM",{id:S.id});if(w)if(/filter/.test(b.change.key)){var y=E.ref.images[E.ref.images.length-1];j(E,b.change.value,y.image)}else{if(/crop|markup|resize/.test(b.change.key)){var X=w.getMetadata("crop"),k=E.ref.images[E.ref.images.length-1];if(X&&X.aspectRatio&&k.crop&&k.crop.aspectRatio&&Math.abs(X.aspectRatio-k.crop.aspectRatio)>1e-5){var de=function(ee){var re=ee.root,Oe=re.ref.images.shift();return Oe.opacity=0,Oe.translateY=-15,re.ref.imageViewBin.push(Oe),Oe}({root:E});D({root:E,props:S,image:(le=de.image,(pe=pe||document.createElement("canvas")).width=le.width,pe.height=le.height,pe.getContext("2d").drawImage(le,0,0),pe)})}else(function(ee){var re=ee.root,Oe=ee.props,Pe=re.query("GET_ITEM",{id:Oe.id});if(Pe){var we=re.ref.images[re.ref.images.length-1];we.crop=Pe.getMetadata("crop"),we.background=re.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),re.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(we.dirty=!0,we.resize=Pe.getMetadata("resize"),we.markup=Pe.getMetadata("markup"))}})({root:E,props:S})}var le,pe}}},DID_THROW_ITEM_LOAD_ERROR:N,DID_THROW_ITEM_PROCESSING_ERROR:N,DID_THROW_ITEM_INVALID:N,DID_COMPLETE_ITEM_PROCESSING:function(A){var E=A.root;E.ref.overlayShadow.opacity=.25,E.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:G,DID_REVERT_ITEM_PROCESSING:G},function(A){var E=A.root,S=E.ref.imageViewBin.filter(function(b){return b.opacity===0});E.ref.imageViewBin=E.ref.imageViewBin.filter(function(b){return b.opacity>0}),S.forEach(function(b){return function(w,y){w.removeChildView(y),y.image.width=1,y.image.height=1,y._destroy()}(E,b)}),S.length=0})})},Qt=function(p){var v=p.addFilter,I=p.utils,T=I.Type,j=I.createRoute,D=I.isFile,G=pr(p);return v("CREATE_VIEW",function(N){var A=N.is,E=N.view,S=N.query;if(A("file")&&S("GET_ALLOW_IMAGE_PREVIEW")){var b=function(w){w.root.ref.shouldRescale=!0};E.registerWriter(j({DID_RESIZE_ROOT:b,DID_STOP_RESIZE:b,DID_LOAD_ITEM:function(w){var y=w.root,X=w.props.id,k=S("GET_ITEM",X);if(k&&D(k.file)&&!k.archived){var de=k.file;if(function(Oe){return/^image/.test(Oe.type)}(de)&&S("GET_IMAGE_PREVIEW_FILTER_ITEM")(k)){var le="createImageBitmap"in(window||{}),pe=S("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!(!le&&pe&&de.size>pe)){y.ref.imagePreview=E.appendChildView(E.createChildView(G,{id:X}));var ee=y.query("GET_IMAGE_PREVIEW_HEIGHT");ee&&y.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:k.id,height:ee});var re=!le&&de.size>S("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");y.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:X},re)}}}},DID_IMAGE_PREVIEW_CALCULATE_SIZE:function(w){var y=w.root,X=w.action;y.ref.imageWidth=X.width,y.ref.imageHeight=X.height,y.ref.shouldRescale=!0,y.ref.shouldDrawPreview=!0,y.dispatch("KICK")},DID_UPDATE_ITEM_METADATA:function(w){var y=w.root;w.action.change.key==="crop"&&(y.ref.shouldRescale=!0)}},function(w){var y=w.root,X=w.props;y.ref.imagePreview&&(y.rect.element.hidden||(y.ref.shouldRescale&&(function(k,de){if(k.ref.imagePreview){var le=de.id,pe=k.query("GET_ITEM",{id:le});if(pe){var ee=k.query("GET_PANEL_ASPECT_RATIO"),re=k.query("GET_ITEM_PANEL_ASPECT_RATIO"),Oe=k.query("GET_IMAGE_PREVIEW_HEIGHT");if(!(ee||re||Oe)){var Pe=k.ref,we=Pe.imageWidth,Ze=Pe.imageHeight;if(we&&Ze){var Ue=k.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),ve=k.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),$e=(pe.getMetadata("exif")||{}).orientation||-1;if($e>=5&&$e<=8){var xe=[Ze,we];we=xe[0],Ze=xe[1]}if(!$t(pe.file)||k.query("GET_IMAGE_PREVIEW_UPSCALE")){var Ve=2048/we;we*=Ve,Ze*=Ve}var It=Ze/we,Pt=(pe.getMetadata("crop")||{}).aspectRatio||It,Tt=Math.max(Ue,Math.min(Ze,ve)),Lt=k.rect.element.width,Yt=Math.min(Lt*Pt,Tt);k.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:pe.id,height:Yt})}}}}}(y,X),y.ref.shouldRescale=!1),y.ref.shouldDrawPreview&&(requestAnimationFrame(function(){requestAnimationFrame(function(){y.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:X.id})})}),y.ref.shouldDrawPreview=!1)))}))}}),{options:{allowImagePreview:[!0,T.BOOLEAN],imagePreviewFilterItem:[function(){return!0},T.FUNCTION],imagePreviewHeight:[null,T.INT],imagePreviewMinHeight:[44,T.INT],imagePreviewMaxHeight:[256,T.INT],imagePreviewMaxFileSize:[null,T.INT],imagePreviewZoomFactor:[2,T.INT],imagePreviewUpscale:[!1,T.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,T.INT],imagePreviewTransparencyIndicator:[null,T.STRING],imagePreviewCalculateAverageImageColor:[!1,T.BOOLEAN],imagePreviewMarkupShow:[!0,T.BOOLEAN],imagePreviewMarkupFilter:[function(){return!0},T.FUNCTION]}}};return typeof window<"u"&&window.document!==void 0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Qt})),Qt});/*!
 * FilePondPluginImageResize 2.0.10
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(M,$){typeof lt=="object"&&typeof Je<"u"?Je.exports=$():typeof define=="function"&&define.amd?define($):(M=M||self).FilePondPluginImageResize=$()})(void 0,function(){var M=function($){var qe=$.addFilter,De=$.utils.Type;return qe("DID_LOAD_ITEM",function(Y,Se){var te=Se.query;return new Promise(function(ne,he){var K=Y.file;if(!function(je){return/^image/.test(je.type)}(K)||!te("GET_ALLOW_IMAGE_RESIZE"))return ne(Y);var Ie=te("GET_IMAGE_RESIZE_MODE"),Ce=te("GET_IMAGE_RESIZE_TARGET_WIDTH"),V=te("GET_IMAGE_RESIZE_TARGET_HEIGHT"),fe=te("GET_IMAGE_RESIZE_UPSCALE");if(Ce===null&&V===null)return ne(Y);var oe,ie,Me,_e=Ce===null?V:Ce,Fe=V===null?_e:V,Ke=URL.createObjectURL(K);oe=Ke,ie=function(je){if(URL.revokeObjectURL(Ke),!je)return ne(Y);var be=je.width,Xe=je.height,Qe=(Y.getMetadata("exif")||{}).orientation||-1;if(Qe>=5&&Qe<=8){var We=[Xe,be];be=We[0],Xe=We[1]}if(be===_e&&Xe===Fe)return ne(Y);if(!fe){if(Ie==="cover"){if(be<=_e||Xe<=Fe)return ne(Y)}else if(be<=_e&&Xe<=_e)return ne(Y)}Y.setMetadata("resize",{mode:Ie,upscale:fe,size:{width:_e,height:Fe}}),ne(Y)},(Me=new Image).onload=function(){var je=Me.naturalWidth,be=Me.naturalHeight;Me=null,ie({width:je,height:be})},Me.onerror=function(){return ie(null)},Me.src=oe})}),{options:{allowImageResize:[!0,De.BOOLEAN],imageResizeMode:["cover",De.STRING],imageResizeUpscale:[!0,De.BOOLEAN],imageResizeTargetWidth:[null,De.INT],imageResizeTargetHeight:[null,De.INT]}}};return typeof window<"u"&&window.document!==void 0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:M})),M});/*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(M,$){typeof lt=="object"&&typeof Je<"u"?$(lt):typeof define=="function"&&define.amd?define(["exports"],$):(M=M||self,$(M.FilePond={}))})(void 0,function(M){var $=function(e){return e instanceof HTMLElement},qe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=Object.assign({},e),i=[],o=[],s=function(){return Object.assign({},n)},u=function(){var m=[].concat(i);return i.length=0,m},l=function(){var m=[].concat(o);o.length=0,m.forEach(function(L){var x=L.type,W=L.data;c(x,W)})},c=function(m,L,x){if(x&&!document.hidden){o.push({type:m,data:L});return}O[m]&&O[m](L),i.push({type:m,data:L})},d=function(m){for(var L,x=arguments.length,W=new Array(x>1?x-1:0),C=1;C<x;C++)W[C-1]=arguments[C];return _[m]?(L=_)[m].apply(L,W):null},f={getState:s,processActionQueue:u,processDispatchQueue:l,dispatch:c,query:d},_={};t.forEach(function(P){_=Object.assign({},P(n),{},_)});var O={};return r.forEach(function(P){O=Object.assign({},P(c,d,n),{},O)}),f},De=function(e,t,r){if(typeof r=="function"){e[t]=r;return}Object.defineProperty(e,t,Object.assign({},r))},Y=function(e,t){for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])},Se=function(e){var t={};return Y(e,function(r){De(t,r,e[r])}),t},te=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(r===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,r)},ne="http://www.w3.org/2000/svg",he=["svg","path"],K=function(e){return he.includes(e)},Ie=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};typeof t=="object"&&(r=t,t=null);var n=K(e)?document.createElementNS(ne,e):document.createElement(e);return t&&(K(e)?te(n,"class",t):n.className=t),Y(r,function(i,o){te(n,i,o)}),n},Ce=function(e){return function(t,r){typeof r<"u"&&e.children[r]?e.insertBefore(t,e.children[r]):e.appendChild(t)}},V=function(e,t){return function(r,n){return typeof n<"u"?t.splice(n,0,r):t.push(r),r}},fe=function(e,t){return function(r){return t.splice(t.indexOf(r),1),r.element.parentNode&&e.removeChild(r.element),r}},oe=function(){return typeof window<"u"&&typeof window.document<"u"}(),ie=function(){return oe},Me=ie()?Ie("svg"):{},_e="children"in Me?function(a){return a.children.length}:function(a){return a.childNodes.length},Fe=function(e,t,r,n){var i=r[0]||e.left,o=r[1]||e.top,s=i+e.width,u=o+e.height*(n[1]||1),l={element:Object.assign({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:i,top:o,right:s,bottom:u}};return t.filter(function(c){return!c.isRectIgnored()}).map(function(c){return c.rect}).forEach(function(c){Ke(l.inner,Object.assign({},c.inner)),Ke(l.outer,Object.assign({},c.outer))}),je(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,je(l.outer),l},Ke=function(e,t){t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},je=function(e){e.width=e.right-e.left,e.height=e.bottom-e.top},be=function(e){return typeof e=="number"},Xe=function(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.001;return Math.abs(e-t)<n&&Math.abs(r)<n},Qe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiffness,r=t===void 0?.5:t,n=e.damping,i=n===void 0?.75:n,o=e.mass,s=o===void 0?10:o,u=null,l=null,c=0,d=!1,f=function(m,L){if(!d){if(!(be(u)&&be(l))){d=!0,c=0;return}var x=-(l-u)*r;c+=x/s,l+=c,c*=i,Xe(l,u,c)||L?(l=u,c=0,d=!0,O.onupdate(l),O.oncomplete(l)):O.onupdate(l)}},_=function(m){if(be(m)&&!be(l)&&(l=m),u===null&&(u=m,l=m),u=m,l===u||typeof u>"u"){d=!0,c=0,O.onupdate(l),O.oncomplete(l);return}d=!1},O=Se({interpolate:f,target:{set:_,get:function(){return u}},resting:{get:function(){return d}},onupdate:function(m){},oncomplete:function(m){}});return O},We=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},mt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.duration,r=t===void 0?500:t,n=e.easing,i=n===void 0?We:n,o=e.delay,s=o===void 0?0:o,u=null,l,c,d=!0,f=!1,_=null,O=function(L,x){d||_===null||(u===null&&(u=L),!(L-u<s)&&(l=L-u-s,l>=r||x?(l=1,c=f?0:1,P.onupdate(c*_),P.oncomplete(c*_),d=!0):(c=l/r,P.onupdate((l>=0?i(f?1-c:c):0)*_))))},P=Se({interpolate:O,target:{get:function(){return f?0:_},set:function(L){if(_===null){_=L,P.onupdate(L),P.oncomplete(L);return}L<_?(_=1,f=!0):(f=!1,_=L),d=!1,u=null}},resting:{get:function(){return d}},onupdate:function(L){},oncomplete:function(L){}});return P},pt={spring:Qe,tween:mt},Ut=function(e,t,r){var n=e[t]&&typeof e[t][r]=="object"?e[t][r]:e[t]||e,i=typeof n=="string"?n:n.type,o=typeof n=="object"?Object.assign({},n):{};return pt[i]?pt[i](o):null},Ne=function(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;t=Array.isArray(t)?t:[t],t.forEach(function(i){e.forEach(function(o){var s=o,u=function(){return r[o]},l=function(d){return r[o]=d};typeof o=="object"&&(s=o.key,u=o.getter||u,l=o.setter||l),!(i[s]&&!n)&&(i[s]={get:u,set:l})})})},xt=function(e){var t=e.mixinConfig,r=e.viewProps,n=e.viewInternalAPI,i=e.viewExternalAPI,o=Object.assign({},r),s=[];return Y(t,function(u,l){var c=Ut(l);if(c){c.onupdate=function(f){r[u]=f},c.target=o[u];var d={key:u,setter:function(_){c.target!==_&&(c.target=_)},getter:function(){return r[u]}};Ne([d],[n,i],r,!0),s.push(c)}}),{write:function(l){var c=document.hidden,d=!0;return s.forEach(function(f){f.resting||(d=!1),f.interpolate(l,c)}),d},destroy:function(){}}},ke=function(e){return function(t,r){e.addEventListener(t,r)}},St=function(e){return function(t,r){e.removeEventListener(t,r)}},vt=function(e){e.mixinConfig,e.viewProps,e.viewInternalAPI;var t=e.viewExternalAPI;e.viewState;var r=e.view,n=[],i=ke(r.element),o=St(r.element);return t.on=function(s,u){n.push({type:s,fn:u}),i(s,u)},t.off=function(s,u){n.splice(n.findIndex(function(l){return l.type===s&&l.fn===u}),1),o(s,u)},{write:function(){return!0},destroy:function(){n.forEach(function(u){o(u.type,u.fn)})}}},Vt=function(e){var t=e.mixinConfig,r=e.viewProps,n=e.viewExternalAPI;Ne(t,n,r)},Be=function(e){return e!=null},$t={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},dr=function(e){var t=e.mixinConfig,r=e.viewProps,n=e.viewInternalAPI,i=e.viewExternalAPI,o=e.view,s=Object.assign({},r),u={};Ne(t,[n,i],r);var l=function(){return[r.translateX||0,r.translateY||0]},c=function(){return[r.scaleX||0,r.scaleY||0]},d=function(){return o.rect?Fe(o.rect,o.childViews,l(),c()):null};return n.rect={get:d},i.rect={get:d},t.forEach(function(f){r[f]=typeof s[f]>"u"?$t[f]:s[f]}),{write:function(){if(qt(u,r))return pr(o.element,r),Object.assign(u,Object.assign({},r)),!0},destroy:function(){}}},qt=function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!0;for(var r in t)if(t[r]!==e[r])return!0;return!1},pr=function(e,t){var r=t.opacity,n=t.perspective,i=t.translateX,o=t.translateY,s=t.scaleX,u=t.scaleY,l=t.rotateX,c=t.rotateY,d=t.rotateZ,f=t.originX,_=t.originY,O=t.width,P=t.height,m="",L="";(Be(f)||Be(_))&&(L+="transform-origin: "+(f||0)+"px "+(_||0)+"px;"),Be(n)&&(m+="perspective("+n+"px) "),(Be(i)||Be(o))&&(m+="translate3d("+(i||0)+"px, "+(o||0)+"px, 0) "),(Be(s)||Be(u))&&(m+="scale3d("+(Be(s)?s:1)+", "+(Be(u)?u:1)+", 1) "),Be(d)&&(m+="rotateZ("+d+"rad) "),Be(l)&&(m+="rotateX("+l+"rad) "),Be(c)&&(m+="rotateY("+c+"rad) "),m.length&&(L+="transform:"+m+";"),Be(r)&&(L+="opacity:"+r+";",r===0&&(L+="visibility:hidden;"),r<1&&(L+="pointer-events:none;")),Be(P)&&(L+="height:"+P+"px;"),Be(O)&&(L+="width:"+O+"px;");var x=e.elementCurrentStyle||"";(L.length!==x.length||L!==x)&&(e.style.cssText=L,e.elementCurrentStyle=L)},Qt={styles:dr,listeners:vt,animations:xt,apis:Vt},p=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.layoutCalculated||(e.paddingTop=parseInt(r.paddingTop,10)||0,e.marginTop=parseInt(r.marginTop,10)||0,e.marginRight=parseInt(r.marginRight,10)||0,e.marginBottom=parseInt(r.marginBottom,10)||0,e.marginLeft=parseInt(r.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e},v=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.tag,r=t===void 0?"div":t,n=e.name,i=n===void 0?null:n,o=e.attributes,s=o===void 0?{}:o,u=e.read,l=u===void 0?function(){}:u,c=e.write,d=c===void 0?function(){}:c,f=e.create,_=f===void 0?function(){}:f,O=e.destroy,P=O===void 0?function(){}:O,m=e.filterFrameActionsForChild,L=m===void 0?function(B,q){return q}:m,x=e.didCreateView,W=x===void 0?function(){}:x,C=e.didWriteView,ue=C===void 0?function(){}:C,F=e.ignoreRect,Ae=F===void 0?!1:F,ye=e.ignoreRectUpdate,U=ye===void 0?!1:ye,z=e.mixins,Q=z===void 0?[]:z;return function(B){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=Ie(r,"filepond--"+i,s),Le=window.getComputedStyle(Z,null),Re=p(),J=null,R=!1,g=[],H=[],ae={},ce={},ge=[d],Ee=[l],Te=[P],Ft=function(){return Z},kt=function(){return g.concat()},Ss=function(){return ae},Ps=function(me){return function(ft,dt){return ft(me,dt)}},Qn=function(){return J||(J=Fe(Re,g,[0,0],[1,1]),J)},Ls=function(){return Le},ws=function(){J=null,g.forEach(function(dt){return dt._read()});var me=!(U&&Re.width&&Re.height);me&&p(Re,Z,Le);var ft={root:gt,props:q,rect:Re};Ee.forEach(function(dt){return dt(ft)})},Ms=function(me,ft,dt){var Bt=ft.length===0;return ge.forEach(function(tt){var Dt=tt({props:q,root:gt,actions:ft,timestamp:me,shouldOptimize:dt});Dt===!1&&(Bt=!1)}),H.forEach(function(tt){var Dt=tt.write(me);Dt===!1&&(Bt=!1)}),g.filter(function(tt){return!!tt.element.parentNode}).forEach(function(tt){var Dt=tt._write(me,L(tt,ft),dt);Dt||(Bt=!1)}),g.forEach(function(tt,Dt){tt.element.parentNode||(gt.appendChild(tt.element,Dt),tt._read(),tt._write(me,L(tt,ft),dt),Bt=!1)}),R=Bt,ue({props:q,root:gt,actions:ft,timestamp:me}),Bt},bs=function(){H.forEach(function(me){return me.destroy()}),Te.forEach(function(me){me({root:gt,props:q})}),g.forEach(function(me){return me._destroy()})},Zn={element:{get:Ft},style:{get:Ls},childViews:{get:kt}},Kn=Object.assign({},Zn,{rect:{get:Qn},ref:{get:Ss},is:function(me){return i===me},appendChild:Ce(Z),createChildView:Ps(B),linkView:function(me){return g.push(me),me},unlinkView:function(me){g.splice(g.indexOf(me),1)},appendChildView:V(Z,g),removeChildView:fe(Z,g),registerWriter:function(me){return ge.push(me)},registerReader:function(me){return Ee.push(me)},registerDestroyer:function(me){return Te.push(me)},invalidateLayout:function(){return Z.layoutCalculated=!1},dispatch:B.dispatch,query:B.query}),Jn={element:{get:Ft},childViews:{get:kt},rect:{get:Qn},resting:{get:function(){return R}},isRectIgnored:function(){return Ae},_read:ws,_write:Ms,_destroy:bs},Cs=Object.assign({},Zn,{rect:{get:function(){return Re}}});Object.keys(Q).sort(function(Ge,me){return Ge==="styles"?1:me==="styles"?-1:0}).forEach(function(Ge){var me=Qt[Ge]({mixinConfig:Q[Ge],viewProps:q,viewState:ce,viewInternalAPI:Kn,viewExternalAPI:Jn,view:Se(Cs)});me&&H.push(me)});var gt=Se(Kn);_({root:gt,props:q});var Ns=_e(Z);return g.forEach(function(Ge,me){gt.appendChild(Ge.element,Ns+me)}),W(gt),Se(Jn)}},I=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:60,n="__framePainter";if(window[n]){window[n].readers.push(e),window[n].writers.push(t);return}window[n]={readers:[e],writers:[t]};var i=window[n],o=1e3/r,s=null,u=null,l=null,c=null,d=function(){document.hidden?(l=function(){return window.setTimeout(function(){return f(performance.now())},o)},c=function(){return window.clearTimeout(u)}):(l=function(){return window.requestAnimationFrame(f)},c=function(){return window.cancelAnimationFrame(u)})};document.addEventListener("visibilitychange",function(){c&&c(),d(),f(performance.now())});var f=function _(O){u=l(_),s||(s=O);var P=O-s;P<=o||(s=O-P%o,i.readers.forEach(function(m){return m()}),i.writers.forEach(function(m){return m(O)}))};return d(),f(performance.now()),{pause:function(){c(u)}}},T=function(e,t){return function(r){var n=r.root,i=r.props,o=r.actions,s=o===void 0?[]:o,u=r.timestamp,l=r.shouldOptimize;s.filter(function(c){return e[c.type]}).forEach(function(c){return e[c.type]({root:n,props:i,action:c.data,timestamp:u,shouldOptimize:l})}),t&&t({root:n,props:i,actions:s,timestamp:u,shouldOptimize:l})}},j=function(e,t){return t.parentNode.insertBefore(e,t)},D=function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},G=function(e){return Array.isArray(e)},N=function(e){return e==null},A=function(e){return e.trim()},E=function(e){return""+e},S=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return N(e)?[]:G(e)?e:E(e).split(t).map(A).filter(function(r){return r.length})},b=function(e){return typeof e=="boolean"},w=function(e){return b(e)?e:e==="true"},y=function(e){return typeof e=="string"},X=function(e){return be(e)?e:y(e)?E(e).replace(/[a-z]+/gi,""):0},k=function(e){return parseInt(X(e),10)},de=function(e){return parseFloat(X(e))},le=function(e){return be(e)&&isFinite(e)&&Math.floor(e)===e},pe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(le(e))return e;var r=E(e).trim();return/MB$/i.test(r)?(r=r.replace(/MB$i/,"").trim(),k(r)*t*t):/KB/i.test(r)?(r=r.replace(/KB$i/,"").trim(),k(r)*t):k(r)},ee=function(e){return typeof e=="function"},re=function(e){for(var t=self,r=e.split("."),n=null;n=r.shift();)if(t=t[n],!t)return null;return t},Oe={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},Pe=function(e){var t={};return t.url=y(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},Y(Oe,function(r){t[r]=we(r,e[r],Oe[r],t.timeout,t.headers)}),t.process=e.process||y(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},we=function(e,t,r,n,i){if(t===null)return null;if(typeof t=="function")return t;var o={url:r==="GET"||r==="PATCH"?"?"+e+"=":"",method:r,headers:i,withCredentials:!1,timeout:n,onload:null,ondata:null,onerror:null};if(y(t))return o.url=t,o;if(Object.assign(o,t),y(o.headers)){var s=o.headers.split(/:(.+)/);o.headers={header:s[0],value:s[1]}}return o.withCredentials=w(o.withCredentials),o},Ze=function(e){return Pe(e)},Ue=function(e){return e===null},ve=function(e){return typeof e=="object"&&e!==null},$e=function(e){return ve(e)&&y(e.url)&&ve(e.process)&&ve(e.revert)&&ve(e.restore)&&ve(e.fetch)},xe=function(e){return G(e)?"array":Ue(e)?"null":le(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":$e(e)?"api":typeof e},Ve=function(e){return e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",')},It={array:S,boolean:w,int:function(e){return xe(e)==="bytes"?pe(e):k(e)},number:de,float:de,bytes:pe,string:function(e){return ee(e)?e:E(e)},function:function(e){return re(e)},serverapi:Ze,object:function(e){try{return JSON.parse(Ve(e))}catch{return null}}},Pt=function(e,t){return It[t](e)},Tt=function(e,t,r){if(e===t)return e;var n=xe(e);if(n!==r){var i=Pt(e,r);if(n=xe(i),i===null)throw'Trying to assign value with incorrect type to "'+option+'", allowed type: "'+r+'"';e=i}return e},Lt=function(e,t){var r=e;return{enumerable:!0,get:function(){return r},set:function(i){r=Tt(i,e,t)}}},Yt=function(e){var t={};return Y(e,function(r){var n=e[r];t[r]=Lt(n[0],n[1])}),Se(t)},ei=function(e){return{items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Yt(e)}},Zt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-";return e.split(/(?=[A-Z])/).map(function(r){return r.toLowerCase()}).join(t)},ti=function(e,t){var r={};return Y(t,function(n){r[n]={get:function(){return e.getState().options[n]},set:function(o){e.dispatch("SET_"+Zt(n,"_").toUpperCase(),{value:o})}}}),r},ri=function(e){return function(t,r,n){var i={};return Y(e,function(o){var s=Zt(o,"_").toUpperCase();i["SET_"+s]=function(u){try{n.options[o]=u.value}catch{}t("DID_SET_"+s,{value:n.options[o]})}}),i}},ni=function(e){return function(t){var r={};return Y(e,function(n){r["GET_"+Zt(n,"_").toUpperCase()]=function(i){return t.options[n]}}),r}},nt={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},vr=function(){return Math.random().toString(36).substring(2,11)};function ii(a,e){if(a==null)return{};var t={},r=Object.keys(a),n,i;for(i=0;i<r.length;i++)n=r[i],!(e.indexOf(n)>=0)&&(t[n]=a[n]);return t}function ai(a,e){if(a==null)return{};var t=ii(a,e),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(n=0;n<i.length;n++)r=i[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(a,r)&&(t[r]=a[r])}return t}function Kt(a){return oi(a)||si(a)||ui()}function oi(a){if(Array.isArray(a)){for(var e=0,t=new Array(a.length);e<a.length;e++)t[e]=a[e];return t}}function si(a){if(Symbol.iterator in Object(a)||Object.prototype.toString.call(a)==="[object Arguments]")return Array.from(a)}function ui(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var Er=function(e,t){return e.splice(t,1)},li=function(e,t){t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},Jt=function(){var e=[],t=function(i,o){Er(e,e.findIndex(function(s){return s.event===i&&(s.cb===o||!o)}))},r=function(i,o,s){e.filter(function(u){return u.event===i}).map(function(u){return u.cb}).forEach(function(u){return li(function(){return u.apply(void 0,Kt(o))},s)})};return{fireSync:function(i){for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];r(i,s,!0)},fire:function(i){for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];r(i,s,!1)},on:function(i,o){e.push({event:i,cb:o})},onOnce:function(i,o){e.push({event:i,cb:function(){t(i,o),o.apply(void 0,arguments)}})},off:t}},Vr=function(e,t,r){Object.getOwnPropertyNames(e).filter(function(n){return!r.includes(n)}).forEach(function(n){return Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})},ci=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],et=function(e){var t={};return Vr(e,t,ci),t},fi=function(e){e.forEach(function(t,r){t.released&&Er(e,r)})},se={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},ze={INPUT:1,LIMBO:2,LOCAL:3},qr=function(e){return/[^0-9]+/.exec(e)},Yr=function(){return qr(1.1.toLocaleString())[0]},di=function(){var e=Yr(),t=1e3.toLocaleString(),r="1000";return t!==r?qr(t)[0]:e==="."?",":"."},h={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},gr=[],ot=function(e,t,r){return new Promise(function(n,i){var o=gr.filter(function(u){return u.key===e}).map(function(u){return u.cb});if(o.length===0){n(t);return}var s=o.shift();o.reduce(function(u,l){return u.then(function(c){return l(c,r)})},s(t,r)).then(function(u){return n(u)}).catch(function(u){return i(u)})})},_t=function(e,t,r){return gr.filter(function(n){return n.key===e}).map(function(n){return n.cb(t,r)})},pi=function(e,t){return gr.push({key:e,cb:t})},vi=function(e){return Object.assign(wt,e)},er=function(){return Object.assign({},wt)},Ei=function(e){Y(e,function(t,r){wt[t]&&(wt[t][0]=Tt(r,wt[t][0],wt[t][1]))})},wt={id:[null,h.STRING],name:["filepond",h.STRING],disabled:[!1,h.BOOLEAN],className:[null,h.STRING],required:[!1,h.BOOLEAN],captureMethod:[null,h.STRING],allowSyncAcceptAttribute:[!0,h.BOOLEAN],allowDrop:[!0,h.BOOLEAN],allowBrowse:[!0,h.BOOLEAN],allowPaste:[!0,h.BOOLEAN],allowMultiple:[!1,h.BOOLEAN],allowReplace:[!0,h.BOOLEAN],allowRevert:[!0,h.BOOLEAN],allowRemove:[!0,h.BOOLEAN],allowProcess:[!0,h.BOOLEAN],allowReorder:[!1,h.BOOLEAN],allowDirectoriesOnly:[!1,h.BOOLEAN],storeAsFile:[!1,h.BOOLEAN],forceRevert:[!1,h.BOOLEAN],maxFiles:[null,h.INT],checkValidity:[!1,h.BOOLEAN],itemInsertLocationFreedom:[!0,h.BOOLEAN],itemInsertLocation:["before",h.STRING],itemInsertInterval:[75,h.INT],dropOnPage:[!1,h.BOOLEAN],dropOnElement:[!0,h.BOOLEAN],dropValidation:[!1,h.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],h.ARRAY],instantUpload:[!0,h.BOOLEAN],maxParallelUploads:[2,h.INT],allowMinimumUploadDuration:[!0,h.BOOLEAN],chunkUploads:[!1,h.BOOLEAN],chunkForce:[!1,h.BOOLEAN],chunkSize:[5e6,h.INT],chunkRetryDelays:[[500,1e3,3e3],h.ARRAY],server:[null,h.SERVER_API],fileSizeBase:[1e3,h.INT],labelFileSizeBytes:["bytes",h.STRING],labelFileSizeKilobytes:["KB",h.STRING],labelFileSizeMegabytes:["MB",h.STRING],labelFileSizeGigabytes:["GB",h.STRING],labelDecimalSeparator:[Yr(),h.STRING],labelThousandsSeparator:[di(),h.STRING],labelIdle:['Seret & Letakkan file Anda atau <span class="filepond--label-action text-primary">Jelajahi</span>',h.STRING],labelInvalidField:["Field contains invalid files",h.STRING],labelFileWaitingForSize:["Waiting for size",h.STRING],labelFileSizeNotAvailable:["Size not available",h.STRING],labelFileCountSingular:["file in list",h.STRING],labelFileCountPlural:["files in list",h.STRING],labelFileLoading:["Loading",h.STRING],labelFileAdded:["Added",h.STRING],labelFileLoadError:["Error during load",h.STRING],labelFileRemoved:["Removed",h.STRING],labelFileRemoveError:["Error during remove",h.STRING],labelFileProcessing:["Uploading",h.STRING],labelFileProcessingComplete:["Upload complete",h.STRING],labelFileProcessingAborted:["Upload cancelled",h.STRING],labelFileProcessingError:["Error during upload",h.STRING],labelFileProcessingRevertError:["Error during revert",h.STRING],labelTapToCancel:["tap to cancel",h.STRING],labelTapToRetry:["tap to retry",h.STRING],labelTapToUndo:["tap to undo",h.STRING],labelButtonRemoveItem:["Remove",h.STRING],labelButtonAbortItemLoad:["Abort",h.STRING],labelButtonRetryItemLoad:["Retry",h.STRING],labelButtonAbortItemProcessing:["Cancel",h.STRING],labelButtonUndoItemProcessing:["Undo",h.STRING],labelButtonRetryItemProcessing:["Retry",h.STRING],labelButtonProcessItem:["Upload",h.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',h.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',h.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',h.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',h.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',h.STRING],oninit:[null,h.FUNCTION],onwarning:[null,h.FUNCTION],onerror:[null,h.FUNCTION],onactivatefile:[null,h.FUNCTION],oninitfile:[null,h.FUNCTION],onaddfilestart:[null,h.FUNCTION],onaddfileprogress:[null,h.FUNCTION],onaddfile:[null,h.FUNCTION],onprocessfilestart:[null,h.FUNCTION],onprocessfileprogress:[null,h.FUNCTION],onprocessfileabort:[null,h.FUNCTION],onprocessfilerevert:[null,h.FUNCTION],onprocessfile:[null,h.FUNCTION],onprocessfiles:[null,h.FUNCTION],onremovefile:[null,h.FUNCTION],onpreparefile:[null,h.FUNCTION],onupdatefiles:[null,h.FUNCTION],onreorderfiles:[null,h.FUNCTION],beforeDropFile:[null,h.FUNCTION],beforeAddFile:[null,h.FUNCTION],beforeRemoveFile:[null,h.FUNCTION],beforePrepareFile:[null,h.FUNCTION],stylePanelLayout:[null,h.STRING],stylePanelAspectRatio:[null,h.STRING],styleItemPanelAspectRatio:[null,h.STRING],styleButtonRemoveItemPosition:["left",h.STRING],styleButtonProcessItemPosition:["right",h.STRING],styleLoadIndicatorPosition:["right",h.STRING],styleProgressIndicatorPosition:["right",h.STRING],styleButtonRemoveItemAlign:[!1,h.BOOLEAN],files:[[],h.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],h.ARRAY]},ht=function(e,t){return N(t)?e[0]||null:le(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(function(r){return r.id===t})||null)},Hr=function(e){if(N(e))return e;if(/:/.test(e)){var t=e.split(":");return t[1]/t[0]}return parseFloat(e)},st=function(e){return e.filter(function(t){return!t.archived})},Mt={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},tr=null,gi=function(){if(tr===null)try{var e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));var t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,tr=t.files.length===1}catch{tr=!1}return tr},mi=[se.LOAD_ERROR,se.PROCESSING_ERROR,se.PROCESSING_REVERT_ERROR],Ii=[se.LOADING,se.PROCESSING,se.PROCESSING_QUEUED,se.INIT],Ti=[se.PROCESSING_COMPLETE],_i=function(e){return mi.includes(e.status)},hi=function(e){return Ii.includes(e.status)},Ri=function(e){return Ti.includes(e.status)},Wr=function(e){return ve(e.options.server)&&(ve(e.options.server.process)||ee(e.options.server.process))},Oi=function(e){return{GET_STATUS:function(){var r=st(e.items),n=Mt.EMPTY,i=Mt.ERROR,o=Mt.BUSY,s=Mt.IDLE,u=Mt.READY;return r.length===0?n:r.some(_i)?i:r.some(hi)?o:r.some(Ri)?u:s},GET_ITEM:function(r){return ht(e.items,r)},GET_ACTIVE_ITEM:function(r){return ht(st(e.items),r)},GET_ACTIVE_ITEMS:function(){return st(e.items)},GET_ITEMS:function(){return e.items},GET_ITEM_NAME:function(r){var n=ht(e.items,r);return n?n.filename:null},GET_ITEM_SIZE:function(r){var n=ht(e.items,r);return n?n.fileSize:null},GET_STYLES:function(){return Object.keys(e.options).filter(function(r){return/^style/.test(r)}).map(function(r){return{name:r,value:e.options[r]}})},GET_PANEL_ASPECT_RATIO:function(){var r=/circle/.test(e.options.stylePanelLayout),n=r?1:Hr(e.options.stylePanelAspectRatio);return n},GET_ITEM_PANEL_ASPECT_RATIO:function(){return e.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function(r){return st(e.items).filter(function(n){return n.status===r})},GET_TOTAL_ITEMS:function(){return st(e.items).length},SHOULD_UPDATE_FILE_INPUT:function(){return e.options.storeAsFile&&gi()&&!Wr(e)},IS_ASYNC:function(){return Wr(e)},GET_FILE_SIZE_LABELS:function(r){return{labelBytes:r("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:r("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:r("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:r("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0}}}},Ai=function(e){var t=st(e.items).length;if(!e.options.allowMultiple)return t===0;var r=e.options.maxFiles;return r===null||t<r},zr=function(e,t,r){return Math.max(Math.min(r,e),t)},yi=function(e,t,r){return e.splice(t,0,r)},Di=function(e,t,r){return N(t)?null:typeof r>"u"?(e.push(t),t):(r=zr(r,0,e.length),yi(e,r,t),t)},mr=function(e){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e)},Ht=function(e){return e.split("/").pop().split("?").shift()},rr=function(e){return e.split(".").pop()},Si=function(e){if(typeof e!="string")return"";var t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},Wt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t+e).slice(-t.length)},jr=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return e.getFullYear()+"-"+Wt(e.getMonth()+1,"00")+"-"+Wt(e.getDate(),"00")+"_"+Wt(e.getHours(),"00")+"-"+Wt(e.getMinutes(),"00")+"-"+Wt(e.getSeconds(),"00")},bt=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=typeof r=="string"?e.slice(0,e.size,r):e.slice(0,e.size,e.type);return i.lastModifiedDate=new Date,e._relativePath&&(i._relativePath=e._relativePath),y(t)||(t=jr()),t&&n===null&&rr(t)?i.name=t:(n=n||Si(i.type),i.name=t+(n?"."+n:"")),i},Pi=function(){return window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder},Xr=function(e,t){var r=Pi();if(r){var n=new r;return n.append(e),n.getBlob(t)}return new Blob([e],{type:t})},Li=function(e,t){for(var r=new ArrayBuffer(e.length),n=new Uint8Array(r),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return Xr(r,t)},kr=function(e){return(/^data:(.+);/.exec(e)||[])[1]||null},wi=function(e){var t=e.split(",")[1];return t.replace(/\s/g,"")},Mi=function(e){return atob(wi(e))},bi=function(e){var t=kr(e),r=Mi(e);return Li(r,t)},Ci=function(e,t,r){return bt(bi(e),t,null,r)},Ni=function(e){if(!/^content-disposition:/i.test(e))return null;var t=e.split(/filename=|filename\*=.+''/).splice(1).map(function(r){return r.trim().replace(/^["']|[;"']{0,2}$/g,"")}).filter(function(r){return r.length});return t.length?decodeURI(t[t.length-1]):null},Gi=function(e){if(/content-length:/i.test(e)){var t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},Fi=function(e){if(/x-content-transfer-id:/i.test(e)){var t=(e.split(":")[1]||"").trim();return t||null}return null},Ir=function(e){var t={source:null,name:null,size:null},r=e.split(`
`),n=!0,i=!1,o=void 0;try{for(var s=r[Symbol.iterator](),u;!(n=(u=s.next()).done);n=!0){var l=u.value,c=Ni(l);if(c){t.name=c;continue}var d=Gi(l);if(d){t.size=d;continue}var f=Fi(l);if(f){t.source=f;continue}}}catch(_){i=!0,o=_}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return t},Bi=function(e){var t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},r=function(){return t.progress},n=function(){t.request&&t.request.abort&&t.request.abort()},i=function(){var l=t.source;s.fire("init",l),l instanceof File?s.fire("load",l):l instanceof Blob?s.fire("load",bt(l,l.name)):mr(l)?s.fire("load",Ci(l)):o(l)},o=function(l){if(!e){s.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(l,function(c){t.duration=Date.now()-t.timestamp,t.complete=!0,c instanceof Blob&&(c=bt(c,c.name||Ht(l))),s.fire("load",c instanceof Blob?c:c?c.body:null)},function(c){s.fire("error",typeof c=="string"?{type:"error",code:0,body:c}:c)},function(c,d,f){if(f&&(t.size=f),t.duration=Date.now()-t.timestamp,!c){t.progress=null;return}t.progress=d/f,s.fire("progress",t.progress)},function(){s.fire("abort")},function(c){var d=Ir(typeof c=="string"?c:c.headers);s.fire("meta",{size:t.size||d.size,filename:d.name,source:d.source})})},s=Object.assign({},Jt(),{setSource:function(l){return t.source=l},getProgress:r,abort:n,load:i});return s},$r=function(e){return/GET|HEAD/.test(e)},Rt=function(e,t,r){var n={onheaders:function(){},onprogress:function(){},onload:function(){},ontimeout:function(){},onerror:function(){},onabort:function(){},abort:function(){i=!0,s.abort()}},i=!1,o=!1;r=Object.assign({method:"POST",headers:{},withCredentials:!1},r),t=encodeURI(t),$r(r.method)&&e&&(t=""+t+encodeURIComponent(typeof e=="string"?e:JSON.stringify(e)));var s=new XMLHttpRequest,u=$r(r.method)?s:s.upload;return u.onprogress=function(l){i||n.onprogress(l.lengthComputable,l.loaded,l.total)},s.onreadystatechange=function(){s.readyState<2||s.readyState===4&&s.status===0||o||(o=!0,n.onheaders(s))},s.onload=function(){s.status>=200&&s.status<300?n.onload(s):n.onerror(s)},s.onerror=function(){return n.onerror(s)},s.onabort=function(){i=!0,n.onabort()},s.ontimeout=function(){return n.ontimeout(s)},s.open(r.method,t,!0),le(r.timeout)&&(s.timeout=r.timeout),Object.keys(r.headers).forEach(function(l){var c=unescape(encodeURIComponent(r.headers[l]));s.setRequestHeader(l,c)}),r.responseType&&(s.responseType=r.responseType),r.withCredentials&&(s.withCredentials=!0),s.send(e),n},Ye=function(e,t,r,n){return{type:e,code:t,body:r,headers:n}},Ot=function(e){return function(t){e(Ye("error",0,"Timeout",t.getAllResponseHeaders()))}},Qr=function(e){return/\?/.test(e)},zt=function(){for(var e="",t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(i){e+=Qr(e)&&Qr(i)?i.replace(/\?/,"&"):i}),e},Tr=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(typeof t=="function")return t;if(!t||!y(t.url))return null;var r=t.onload||function(i){return i},n=t.onerror||function(i){return null};return function(i,o,s,u,l,c){var d=Rt(i,zt(e,t.url),Object.assign({},t,{responseType:"blob"}));return d.onload=function(f){var _=f.getAllResponseHeaders(),O=Ir(_).name||Ht(i);o(Ye("load",f.status,t.method==="HEAD"?null:bt(r(f.response),O),_))},d.onerror=function(f){s(Ye("error",f.status,n(f.response)||f.statusText,f.getAllResponseHeaders()))},d.onheaders=function(f){c(Ye("headers",f.status,null,f.getAllResponseHeaders()))},d.ontimeout=Ot(s),d.onprogress=u,d.onabort=l,d}},it={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},Ui=function(e,t,r,n,i,o,s,u,l,c,d){for(var f=[],_=d.chunkTransferId,O=d.chunkServer,P=d.chunkSize,m=d.chunkRetryDelays,L={serverId:_,aborted:!1},x=t.ondata||function(R){return R},W=t.onload||function(R,g){return g==="HEAD"?R.getResponseHeader("Upload-Offset"):R.response},C=t.onerror||function(R){return null},ue=function(g){var H=new FormData;ve(i)&&H.append(r,JSON.stringify(i));var ae=typeof t.headers=="function"?t.headers(n,i):Object.assign({},t.headers,{"Upload-Length":n.size}),ce=Object.assign({},t,{headers:ae}),ge=Rt(x(H),zt(e,t.url),ce);ge.onload=function(Ee){return g(W(Ee,ce.method))},ge.onerror=function(Ee){return s(Ye("error",Ee.status,C(Ee.response)||Ee.statusText,Ee.getAllResponseHeaders()))},ge.ontimeout=Ot(s)},F=function(g){var H=zt(e,O.url,L.serverId),ae=typeof t.headers=="function"?t.headers(L.serverId):Object.assign({},t.headers),ce={headers:ae,method:"HEAD"},ge=Rt(null,H,ce);ge.onload=function(Ee){return g(W(Ee,ce.method))},ge.onerror=function(Ee){return s(Ye("error",Ee.status,C(Ee.response)||Ee.statusText,Ee.getAllResponseHeaders()))},ge.ontimeout=Ot(s)},Ae=Math.floor(n.size/P),ye=0;ye<=Ae;ye++){var U=ye*P,z=n.slice(U,U+P,"application/offset+octet-stream");f[ye]={index:ye,size:z.size,offset:U,data:z,file:n,progress:0,retries:Kt(m),status:it.QUEUED,error:null,request:null,timeout:null}}var Q=function(){return o(L.serverId)},B=function(g){return g.status===it.QUEUED||g.status===it.ERROR},q=function(g){if(!L.aborted){if(g=g||f.find(B),!g){f.every(function(Te){return Te.status===it.COMPLETE})&&Q();return}g.status=it.PROCESSING,g.progress=null;var H=O.ondata||function(Te){return Te},ae=O.onerror||function(Te){return null},ce=zt(e,O.url,L.serverId),ge=typeof O.headers=="function"?O.headers(g):Object.assign({},O.headers,{"Content-Type":"application/offset+octet-stream","Upload-Offset":g.offset,"Upload-Length":n.size,"Upload-Name":n.name}),Ee=g.request=Rt(H(g.data),ce,Object.assign({},O,{headers:ge}));Ee.onload=function(){g.status=it.COMPLETE,g.request=null,Re()},Ee.onprogress=function(Te,Ft,kt){g.progress=Te?Ft:null,Le()},Ee.onerror=function(Te){g.status=it.ERROR,g.request=null,g.error=ae(Te.response)||Te.statusText,Z(g)||s(Ye("error",Te.status,ae(Te.response)||Te.statusText,Te.getAllResponseHeaders()))},Ee.ontimeout=function(Te){g.status=it.ERROR,g.request=null,Z(g)||Ot(s)(Te)},Ee.onabort=function(){g.status=it.QUEUED,g.request=null,l()}}},Z=function(g){return g.retries.length===0?!1:(g.status=it.WAITING,clearTimeout(g.timeout),g.timeout=setTimeout(function(){q(g)},g.retries.shift()),!0)},Le=function(){var g=f.reduce(function(ae,ce){return ae===null||ce.progress===null?null:ae+ce.progress},0);if(g===null)return u(!1,0,0);var H=f.reduce(function(ae,ce){return ae+ce.size},0);u(!0,g,H)},Re=function(){var g=f.filter(function(H){return H.status===it.PROCESSING}).length;g>=1||q()},J=function(){f.forEach(function(g){clearTimeout(g.timeout),g.request&&g.request.abort()})};return L.serverId?F(function(R){L.aborted||(f.filter(function(g){return g.offset<R}).forEach(function(g){g.status=it.COMPLETE,g.progress=g.size}),Re())}):ue(function(R){L.aborted||(c(R),L.serverId=R,Re())}),{abort:function(){L.aborted=!0,J()}}},xi=function(e,t,r,n){return function(i,o,s,u,l,c,d){if(i){var f=n.chunkUploads,_=f&&i.size>n.chunkSize,O=f&&(_||n.chunkForce);if(i instanceof Blob&&O)return Ui(e,t,r,i,o,s,u,l,c,d,n);var P=t.ondata||function(F){return F},m=t.onload||function(F){return F},L=t.onerror||function(F){return null},x=typeof t.headers=="function"?t.headers(i,o)||{}:Object.assign({},t.headers),W=Object.assign({},t,{headers:x}),C=new FormData;ve(o)&&C.append(r,JSON.stringify(o)),(i instanceof Blob?[{name:null,file:i}]:i).forEach(function(F){C.append(r,F.file,F.name===null?F.file.name:""+F.name+F.file.name)});var ue=Rt(P(C),zt(e,t.url),W);return ue.onload=function(F){s(Ye("load",F.status,m(F.response),F.getAllResponseHeaders()))},ue.onerror=function(F){u(Ye("error",F.status,L(F.response)||F.statusText,F.getAllResponseHeaders()))},ue.ontimeout=Ot(u),ue.onprogress=l,ue.onabort=c,ue}}},Vi=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return typeof t=="function"?function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t.apply(void 0,[r].concat(o,[n]))}:!t||!y(t.url)?null:xi(e,t,r,n)},jt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(typeof t=="function")return t;if(!t||!y(t.url))return function(i,o){return o()};var r=t.onload||function(i){return i},n=t.onerror||function(i){return null};return function(i,o,s){var u=Rt(i,e+t.url,t);return u.onload=function(l){o(Ye("load",l.status,r(l.response),l.getAllResponseHeaders()))},u.onerror=function(l){s(Ye("error",l.status,n(l.response)||l.statusText,l.getAllResponseHeaders()))},u.ontimeout=Ot(s),u}},Zr=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return e+Math.random()*(t-e)},qi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:25,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:250,i=null,o=Date.now(),s=function u(){var l=Date.now()-o,c=Zr(r,n);l+c>t&&(c=l+c-t);var d=l/t;if(d>=1||document.hidden){e(1);return}e(d),i=setTimeout(u,c)};return t>0&&s(),{clear:function(){clearTimeout(i)}}},Yi=function(e,t){var r={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},n=t.allowMinimumUploadDuration,i=function(f,_){var O=function(){r.duration===0||r.progress===null||c.fire("progress",c.getProgress())},P=function(){r.complete=!0,c.fire("load-perceived",r.response.body)};c.fire("start"),r.timestamp=Date.now(),r.perceivedPerformanceUpdater=qi(function(m){r.perceivedProgress=m,r.perceivedDuration=Date.now()-r.timestamp,O(),r.response&&r.perceivedProgress===1&&!r.complete&&P()},n?Zr(750,1500):0),r.request=e(f,_,function(m){r.response=ve(m)?m:{type:"load",code:200,body:""+m,headers:{}},r.duration=Date.now()-r.timestamp,r.progress=1,c.fire("load",r.response.body),(!n||n&&r.perceivedProgress===1)&&P()},function(m){r.perceivedPerformanceUpdater.clear(),c.fire("error",ve(m)?m:{type:"error",code:0,body:""+m})},function(m,L,x){r.duration=Date.now()-r.timestamp,r.progress=m?L/x:null,O()},function(){r.perceivedPerformanceUpdater.clear(),c.fire("abort",r.response?r.response.body:null)},function(m){c.fire("transfer",m)})},o=function(){r.request&&(r.perceivedPerformanceUpdater.clear(),r.request.abort&&r.request.abort(),r.complete=!0)},s=function(){o(),r.complete=!1,r.perceivedProgress=0,r.progress=0,r.timestamp=null,r.perceivedDuration=0,r.duration=0,r.request=null,r.response=null},u=n?function(){return r.progress?Math.min(r.progress,r.perceivedProgress):null}:function(){return r.progress||null},l=n?function(){return Math.min(r.duration,r.perceivedDuration)}:function(){return r.duration},c=Object.assign({},Jt(),{process:i,abort:o,getProgress:u,getDuration:l,reset:s});return c},Kr=function(e){return e.substring(0,e.lastIndexOf("."))||e},Hi=function(e){var t=[e.name,e.size,e.type];return e instanceof Blob||mr(e)?t[0]=e.name||jr():mr(e)?(t[1]=e.length,t[2]=kr(e)):y(e)&&(t[0]=Ht(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},Ct=function(e){return!!(e instanceof File||e instanceof Blob&&e.name)},Wi=function a(e){if(!ve(e))return e;var t=G(e)?[]:{};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t[r]=n&&ve(n)?a(n):n}return t},zi=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=vr(),i={archived:!1,frozen:!1,released:!1,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:!1,status:t?se.PROCESSING_COMPLETE:se.INIT,activeLoader:null,activeProcessor:null},o=null,s={},u=function(z){return i.status=z},l=function(z){if(!(i.released||i.frozen)){for(var Q=arguments.length,B=new Array(Q>1?Q-1:0),q=1;q<Q;q++)B[q-1]=arguments[q];Ae.fire.apply(Ae,[z].concat(B))}},c=function(){return rr(i.file.name)},d=function(){return i.file.type},f=function(){return i.file.size},_=function(){return i.file},O=function(z,Q,B){if(i.source=z,Ae.fireSync("init"),i.file){Ae.fireSync("load-skip");return}i.file=Hi(z),Q.on("init",function(){l("load-init")}),Q.on("meta",function(q){i.file.size=q.size,i.file.filename=q.filename,q.source&&(e=ze.LIMBO,i.serverFileReference=q.source,i.status=se.PROCESSING_COMPLETE),l("load-meta")}),Q.on("progress",function(q){u(se.LOADING),l("load-progress",q)}),Q.on("error",function(q){u(se.LOAD_ERROR),l("load-request-error",q)}),Q.on("abort",function(){u(se.INIT),l("load-abort")}),Q.on("load",function(q){i.activeLoader=null;var Z=function(J){i.file=Ct(J)?J:i.file,e===ze.LIMBO&&i.serverFileReference?u(se.PROCESSING_COMPLETE):u(se.IDLE),l("load")},Le=function(J){i.file=q,l("load-meta"),u(se.LOAD_ERROR),l("load-file-error",J)};if(i.serverFileReference){Z(q);return}B(q,Z,Le)}),Q.setSource(z),i.activeLoader=Q,Q.load()},P=function(){i.activeLoader&&i.activeLoader.load()},m=function(){if(i.activeLoader){i.activeLoader.abort();return}u(se.INIT),l("load-abort")},L=function U(z,Q){if(i.processingAborted){i.processingAborted=!1;return}if(u(se.PROCESSING),o=null,!(i.file instanceof Blob)){Ae.on("load",function(){U(z,Q)});return}z.on("load",function(Z){i.transferId=null,i.serverFileReference=Z}),z.on("transfer",function(Z){i.transferId=Z}),z.on("load-perceived",function(Z){i.activeProcessor=null,i.transferId=null,i.serverFileReference=Z,u(se.PROCESSING_COMPLETE),l("process-complete",Z)}),z.on("start",function(){l("process-start")}),z.on("error",function(Z){i.activeProcessor=null,u(se.PROCESSING_ERROR),l("process-error",Z)}),z.on("abort",function(Z){i.activeProcessor=null,i.serverFileReference=Z,u(se.IDLE),l("process-abort"),o&&o()}),z.on("progress",function(Z){l("process-progress",Z)});var B=function(Le){i.archived||z.process(Le,Object.assign({},s))},q=console.error;Q(i.file,B,q),i.activeProcessor=z},x=function(){i.processingAborted=!1,u(se.PROCESSING_QUEUED)},W=function(){return new Promise(function(z){if(!i.activeProcessor){i.processingAborted=!0,u(se.IDLE),l("process-abort"),z();return}o=function(){z()},i.activeProcessor.abort()})},C=function(z,Q){return new Promise(function(B,q){var Z=i.serverFileReference!==null?i.serverFileReference:i.transferId;if(Z===null){B();return}z(Z,function(){i.serverFileReference=null,i.transferId=null,B()},function(Le){if(!Q){B();return}u(se.PROCESSING_REVERT_ERROR),l("process-revert-error"),q(Le)}),u(se.IDLE),l("process-revert")})},ue=function(z,Q,B){var q=z.split("."),Z=q[0],Le=q.pop(),Re=s;q.forEach(function(J){return Re=Re[J]}),JSON.stringify(Re[Le])!==JSON.stringify(Q)&&(Re[Le]=Q,l("metadata-update",{key:Z,value:s[Z],silent:B}))},F=function(z){return Wi(z?s[z]:s)},Ae=Object.assign({id:{get:function(){return n}},origin:{get:function(){return e},set:function(z){return e=z}},serverId:{get:function(){return i.serverFileReference}},transferId:{get:function(){return i.transferId}},status:{get:function(){return i.status}},filename:{get:function(){return i.file.name}},filenameWithoutExtension:{get:function(){return Kr(i.file.name)}},fileExtension:{get:c},fileType:{get:d},fileSize:{get:f},file:{get:_},relativePath:{get:function(){return i.file._relativePath}},source:{get:function(){return i.source}},getMetadata:F,setMetadata:function(z,Q,B){if(ve(z)){var q=z;return Object.keys(q).forEach(function(Z){ue(Z,q[Z],Q)}),z}return ue(z,Q,B),Q},extend:function(z,Q){return ye[z]=Q},abortLoad:m,retryLoad:P,requestProcessing:x,abortProcessing:W,load:O,process:L,revert:C},Jt(),{freeze:function(){return i.frozen=!0},release:function(){return i.released=!0},released:{get:function(){return i.released}},archive:function(){return i.archived=!0},archived:{get:function(){return i.archived}}}),ye=Se(Ae);return ye},ji=function(e,t){return N(t)?0:y(t)?e.findIndex(function(r){return r.id===t}):-1},Jr=function(e,t){var r=ji(e,t);if(!(r<0))return e[r]||null},en=function(e,t,r,n,i,o){var s=Rt(null,e,{method:"GET",responseType:"blob"});return s.onload=function(u){var l=u.getAllResponseHeaders(),c=Ir(l).name||Ht(e);t(Ye("load",u.status,bt(u.response,c),l))},s.onerror=function(u){r(Ye("error",u.status,u.statusText,u.getAllResponseHeaders()))},s.onheaders=function(u){o(Ye("headers",u.status,null,u.getAllResponseHeaders()))},s.ontimeout=Ot(r),s.onprogress=n,s.onabort=i,s},tn=function(e){return e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},Xi=function(e){return(e.indexOf(":")>-1||e.indexOf("//")>-1)&&tn(location.href)!==tn(e)},nr=function(e){return function(){return ee(e)?e.apply(void 0,arguments):e}},ki=function(e){return!Ct(e.file)},_r=function(e,t){clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(function(){e("DID_UPDATE_ITEMS",{items:st(t.items)})},0)},rn=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new Promise(function(i){if(!e)return i(!0);var o=e.apply(void 0,r);if(o==null)return i(!0);if(typeof o=="boolean")return i(o);typeof o.then=="function"&&o.then(i)})},hr=function(e,t){e.items.sort(function(r,n){return t(et(r),et(n))})},at=function(e,t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.query,i=r.success,o=i===void 0?function(){}:i,s=r.failure,u=s===void 0?function(){}:s,l=ai(r,["query","success","failure"]),c=ht(e.items,n);if(!c){u({error:Ye("error",0,"Item not found"),file:null});return}t(c,o,u,l||{})}},$i=function(e,t,r){return{ABORT_ALL:function(){st(r.items).forEach(function(i){i.freeze(),i.abortLoad(),i.abortProcessing()})},DID_SET_FILES:function(i){var o=i.value,s=o===void 0?[]:o,u=s.map(function(c){return{source:c.source?c.source:c,options:c.options}}),l=st(r.items);l.forEach(function(c){u.find(function(d){return d.source===c.source||d.source===c.file})||e("REMOVE_ITEM",{query:c,remove:!1})}),l=st(r.items),u.forEach(function(c,d){l.find(function(f){return f.source===c.source||f.file===c.source})||e("ADD_ITEM",Object.assign({},c,{interactionMethod:nt.NONE,index:d}))})},DID_UPDATE_ITEM_METADATA:function(i){var o=i.id,s=i.action,u=i.change;u.silent||(clearTimeout(r.itemUpdateTimeout),r.itemUpdateTimeout=setTimeout(function(){var l=Jr(r.items,o);if(!t("IS_ASYNC")){ot("SHOULD_PREPARE_OUTPUT",!1,{item:l,query:t,action:s,change:u}).then(function(_){var O=t("GET_BEFORE_PREPARE_FILE");O&&(_=O(l,_)),_&&e("REQUEST_PREPARE_OUTPUT",{query:o,item:l,success:function(m){e("DID_PREPARE_OUTPUT",{id:o,file:m})}},!0)});return}l.origin===ze.LOCAL&&e("DID_LOAD_ITEM",{id:l.id,error:null,serverFileReference:l.source});var c=function(){setTimeout(function(){e("REQUEST_ITEM_PROCESSING",{query:o})},32)},d=function(O){l.revert(jt(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(O?c:function(){}).catch(function(){})},f=function(O){l.abortProcessing().then(O?c:function(){})};if(l.status===se.PROCESSING_COMPLETE)return d(r.options.instantUpload);if(l.status===se.PROCESSING)return f(r.options.instantUpload);r.options.instantUpload&&c()},0))},MOVE_ITEM:function(i){var o=i.query,s=i.index,u=ht(r.items,o);if(u){var l=r.items.indexOf(u);s=zr(s,0,r.items.length-1),l!==s&&r.items.splice(s,0,r.items.splice(l,1)[0])}},SORT:function(i){var o=i.compare;hr(r,o),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:function(i){var o=i.items,s=i.index,u=i.interactionMethod,l=i.success,c=l===void 0?function(){}:l,d=i.failure,f=d===void 0?function(){}:d,_=s;if(s===-1||typeof s>"u"){var O=t("GET_ITEM_INSERT_LOCATION"),P=t("GET_TOTAL_ITEMS");_=O==="before"?0:P}var m=t("GET_IGNORED_FILES"),L=function(ue){return Ct(ue)?!m.includes(ue.name.toLowerCase()):!N(ue)},x=o.filter(L),W=x.map(function(C){return new Promise(function(ue,F){e("ADD_ITEM",{interactionMethod:u,source:C.source||C,success:ue,failure:F,index:_++,options:C.options||{}})})});Promise.all(W).then(c).catch(f)},ADD_ITEM:function(i){var o=i.source,s=i.index,u=s===void 0?-1:s,l=i.interactionMethod,c=i.success,d=c===void 0?function(){}:c,f=i.failure,_=f===void 0?function(){}:f,O=i.options,P=O===void 0?{}:O;if(N(o)){_({error:Ye("error",0,"No source"),file:null});return}if(!(Ct(o)&&r.options.ignoredFiles.includes(o.name.toLowerCase()))){if(!Ai(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){var m=Ye("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:o,error:m}),_({error:m,file:null});return}var L=st(r.items)[0];if(L.status===se.PROCESSING_COMPLETE||L.status===se.PROCESSING_REVERT_ERROR){var x=t("GET_FORCE_REVERT");if(L.revert(jt(r.options.server.url,r.options.server.revert),x).then(function(){x&&e("ADD_ITEM",{source:o,index:u,interactionMethod:l,success:d,failure:_,options:P})}).catch(function(){}),x)return}e("REMOVE_ITEM",{query:L.id})}var W=P.type==="local"?ze.LOCAL:P.type==="limbo"?ze.LIMBO:ze.INPUT,C=zi(W,W===ze.INPUT?null:o,P.file);Object.keys(P.metadata||{}).forEach(function(B){C.setMetadata(B,P.metadata[B])}),_t("DID_CREATE_ITEM",C,{query:t,dispatch:e});var ue=t("GET_ITEM_INSERT_LOCATION");r.options.itemInsertLocationFreedom||(u=ue==="before"?-1:r.items.length),Di(r.items,C,u),ee(ue)&&o&&hr(r,ue);var F=C.id;C.on("init",function(){e("DID_INIT_ITEM",{id:F})}),C.on("load-init",function(){e("DID_START_ITEM_LOAD",{id:F})}),C.on("load-meta",function(){e("DID_UPDATE_ITEM_META",{id:F})}),C.on("load-progress",function(B){e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:F,progress:B})}),C.on("load-request-error",function(B){var q=nr(r.options.labelFileLoadError)(B);if(B.code>=400&&B.code<500){e("DID_THROW_ITEM_INVALID",{id:F,error:B,status:{main:q,sub:B.code+" ("+B.body+")"}}),_({error:B,file:et(C)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:F,error:B,status:{main:q,sub:r.options.labelTapToRetry}})}),C.on("load-file-error",function(B){e("DID_THROW_ITEM_INVALID",{id:F,error:B.status,status:B.status}),_({error:B.status,file:et(C)})}),C.on("load-abort",function(){e("REMOVE_ITEM",{query:F})}),C.on("load-skip",function(){e("COMPLETE_LOAD_ITEM",{query:F,item:C,data:{source:o,success:d}})}),C.on("load",function(){var B=function(Z){if(!Z){e("REMOVE_ITEM",{query:F});return}C.on("metadata-update",function(Le){e("DID_UPDATE_ITEM_METADATA",{id:F,change:Le})}),ot("SHOULD_PREPARE_OUTPUT",!1,{item:C,query:t}).then(function(Le){var Re=t("GET_BEFORE_PREPARE_FILE");Re&&(Le=Re(C,Le));var J=function(){e("COMPLETE_LOAD_ITEM",{query:F,item:C,data:{source:o,success:d}}),_r(e,r)};if(Le){e("REQUEST_PREPARE_OUTPUT",{query:F,item:C,success:function(g){e("DID_PREPARE_OUTPUT",{id:F,file:g}),J()}},!0);return}J()})};ot("DID_LOAD_ITEM",C,{query:t,dispatch:e}).then(function(){rn(t("GET_BEFORE_ADD_FILE"),et(C)).then(B)}).catch(function(q){if(!q||!q.error||!q.status)return B(!1);e("DID_THROW_ITEM_INVALID",{id:F,error:q.error,status:q.status})})}),C.on("process-start",function(){e("DID_START_ITEM_PROCESSING",{id:F})}),C.on("process-progress",function(B){e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:F,progress:B})}),C.on("process-error",function(B){e("DID_THROW_ITEM_PROCESSING_ERROR",{id:F,error:B,status:{main:nr(r.options.labelFileProcessingError)(B),sub:r.options.labelTapToRetry}})}),C.on("process-revert-error",function(B){e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:F,error:B,status:{main:nr(r.options.labelFileProcessingRevertError)(B),sub:r.options.labelTapToRetry}})}),C.on("process-complete",function(B){e("DID_COMPLETE_ITEM_PROCESSING",{id:F,error:null,serverFileReference:B}),e("DID_DEFINE_VALUE",{id:F,value:B})}),C.on("process-abort",function(){e("DID_ABORT_ITEM_PROCESSING",{id:F})}),C.on("process-revert",function(){e("DID_REVERT_ITEM_PROCESSING",{id:F}),e("DID_DEFINE_VALUE",{id:F,value:null})}),e("DID_ADD_ITEM",{id:F,index:u,interactionMethod:l}),_r(e,r);var Ae=r.options.server||{},ye=Ae.url,U=Ae.load,z=Ae.restore,Q=Ae.fetch;C.load(o,Bi(W===ze.INPUT?y(o)&&Xi(o)&&Q?Tr(ye,Q):en:W===ze.LIMBO?Tr(ye,z):Tr(ye,U)),function(B,q,Z){ot("LOAD_FILE",B,{query:t}).then(q).catch(Z)})}},REQUEST_PREPARE_OUTPUT:function(i){var o=i.item,s=i.success,u=i.failure,l=u===void 0?function(){}:u,c={error:Ye("error",0,"Item not found"),file:null};if(o.archived)return l(c);ot("PREPARE_OUTPUT",o.file,{query:t,item:o}).then(function(d){ot("COMPLETE_PREPARE_OUTPUT",d,{query:t,item:o}).then(function(f){if(o.archived)return l(c);s(f)})})},COMPLETE_LOAD_ITEM:function(i){var o=i.item,s=i.data,u=s.success,l=s.source,c=t("GET_ITEM_INSERT_LOCATION");if(ee(c)&&l&&hr(r,c),e("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.origin===ze.INPUT?null:l}),u(et(o)),o.origin===ze.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:o.id});return}if(o.origin===ze.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:o.id,error:null,serverFileReference:l}),e("DID_DEFINE_VALUE",{id:o.id,value:o.serverId||l});return}t("IS_ASYNC")&&r.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:o.id})},RETRY_ITEM_LOAD:at(r,function(n){n.retryLoad()}),REQUEST_ITEM_PREPARE:at(r,function(n,i,o){e("REQUEST_PREPARE_OUTPUT",{query:n.id,item:n,success:function(u){e("DID_PREPARE_OUTPUT",{id:n.id,file:u}),i({file:n,output:u})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:at(r,function(n,i,o){var s=n.status===se.IDLE||n.status===se.PROCESSING_ERROR;if(!s){var u=function(){return e("REQUEST_ITEM_PROCESSING",{query:n,success:i,failure:o})},l=function(){return document.hidden?u():setTimeout(u,32)};n.status===se.PROCESSING_COMPLETE||n.status===se.PROCESSING_REVERT_ERROR?n.revert(jt(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(l).catch(function(){}):n.status===se.PROCESSING&&n.abortProcessing().then(l);return}n.status!==se.PROCESSING_QUEUED&&(n.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:n.id}),e("PROCESS_ITEM",{query:n,success:i,failure:o},!0))}),PROCESS_ITEM:at(r,function(n,i,o){var s=t("GET_MAX_PARALLEL_UPLOADS"),u=t("GET_ITEMS_BY_STATUS",se.PROCESSING).length;if(u===s){r.processingQueue.push({id:n.id,success:i,failure:o});return}if(n.status!==se.PROCESSING){var l=function d(){var f=r.processingQueue.shift();if(f){var _=f.id,O=f.success,P=f.failure,m=ht(r.items,_);if(!m||m.archived){d();return}e("PROCESS_ITEM",{query:_,success:O,failure:P},!0)}};n.onOnce("process-complete",function(){i(et(n)),l();var d=r.options.server,f=r.options.instantUpload;if(f&&n.origin===ze.LOCAL&&ee(d.remove)){var _=function(){};n.origin=ze.LIMBO,r.options.server.remove(n.source,_,_)}var O=t("GET_ITEMS_BY_STATUS",se.PROCESSING_COMPLETE).length===r.items.length;O&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),n.onOnce("process-error",function(d){o({error:d,file:et(n)}),l()});var c=r.options;n.process(Yi(Vi(c.server.url,c.server.process,c.name,{chunkTransferId:n.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),function(d,f,_){ot("PREPARE_OUTPUT",d,{query:t,item:n}).then(function(O){e("DID_PREPARE_OUTPUT",{id:n.id,file:O}),f(O)}).catch(_)})}}),RETRY_ITEM_PROCESSING:at(r,function(n){e("REQUEST_ITEM_PROCESSING",{query:n})}),REQUEST_REMOVE_ITEM:at(r,function(n){rn(t("GET_BEFORE_REMOVE_FILE"),et(n)).then(function(i){i&&e("REMOVE_ITEM",{query:n})})}),RELEASE_ITEM:at(r,function(n){n.release()}),REMOVE_ITEM:at(r,function(n,i,o,s){var u=function(){var d=n.id;Jr(r.items,d).archive(),e("DID_REMOVE_ITEM",{error:null,id:d,item:n}),_r(e,r),i(et(n))},l=r.options.server;n.origin===ze.LOCAL&&l&&ee(l.remove)&&s.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:n.id}),l.remove(n.source,function(){return u()},function(c){e("DID_THROW_ITEM_REMOVE_ERROR",{id:n.id,error:Ye("error",0,c,null),status:{main:nr(r.options.labelFileRemoveError)(c),sub:r.options.labelTapToRetry}})})):((s.revert&&n.origin!==ze.LOCAL&&n.serverId!==null||r.options.chunkUploads&&n.file.size>r.options.chunkSize||r.options.chunkUploads&&r.options.chunkForce)&&n.revert(jt(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")),u())}),ABORT_ITEM_LOAD:at(r,function(n){n.abortLoad()}),ABORT_ITEM_PROCESSING:at(r,function(n){if(n.serverId){e("REVERT_ITEM_PROCESSING",{id:n.id});return}n.abortProcessing().then(function(){var i=r.options.instantUpload;i&&e("REMOVE_ITEM",{query:n.id})})}),REQUEST_REVERT_ITEM_PROCESSING:at(r,function(n){if(!r.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:n});return}var i=function(l){l&&e("REVERT_ITEM_PROCESSING",{query:n})},o=t("GET_BEFORE_REMOVE_FILE");if(!o)return i(!0);var s=o(et(n));if(s==null)return i(!0);if(typeof s=="boolean")return i(s);typeof s.then=="function"&&s.then(i)}),REVERT_ITEM_PROCESSING:at(r,function(n){n.revert(jt(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(function(){var i=r.options.instantUpload||ki(n);i&&e("REMOVE_ITEM",{query:n.id})}).catch(function(){})}),SET_OPTIONS:function(i){var o=i.options,s=Object.keys(o),u=Qi.filter(function(c){return s.includes(c)}),l=[].concat(Kt(u),Kt(Object.keys(o).filter(function(c){return!u.includes(c)})));l.forEach(function(c){e("SET_"+Zt(c,"_").toUpperCase(),{value:o[c]})})}}},Qi=["server"],Rr=function(e){return e},ct=function(e){return document.createElement(e)},He=function(e,t){var r=e.childNodes[0];r?t!==r.nodeValue&&(r.nodeValue=t):(r=document.createTextNode(t),e.appendChild(r))},nn=function(e,t,r,n){var i=(n%360-90)*Math.PI/180;return{x:e+r*Math.cos(i),y:t+r*Math.sin(i)}},Zi=function(e,t,r,n,i,o){var s=nn(e,t,r,i),u=nn(e,t,r,n);return["M",s.x,s.y,"A",r,r,0,o,0,u.x,u.y].join(" ")},Ki=function(e,t,r,n,i){var o=1;return i>n&&i-n<=.5&&(o=0),n>i&&n-i>=.5&&(o=0),Zi(e,t,r,Math.min(.9999,n)*360,Math.min(.9999,i)*360,o)},Ji=function(e){var t=e.root,r=e.props;r.spin=!1,r.progress=0,r.opacity=0;var n=Ie("svg");t.ref.path=Ie("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(t.ref.path),t.ref.svg=n,t.appendChild(n)},ea=function(e){var t=e.root,r=e.props;if(r.opacity!==0){r.align&&(t.element.dataset.align=r.align);var n=parseInt(te(t.ref.path,"stroke-width"),10),i=t.rect.element.width*.5,o=0,s=0;r.spin?(o=0,s=.5):(o=0,s=r.progress);var u=Ki(i,i,i-n,o,s);te(t.ref.path,"d",u),te(t.ref.path,"stroke-opacity",r.spin||r.progress>0?1:0)}},an=v({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:Ji,write:ea,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),ta=function(e){var t=e.root,r=e.props;t.element.innerHTML=(r.icon||"")+("<span>"+r.label+"</span>"),r.isDisabled=!1},ra=function(e){var t=e.root,r=e.props,n=r.isDisabled,i=t.query("GET_DISABLED")||r.opacity===0;i&&!n?(r.isDisabled=!0,te(t.element,"disabled","disabled")):!i&&n&&(r.isDisabled=!1,t.element.removeAttribute("disabled"))},on=v({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:ta,write:ra}),sn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n.labelBytes,o=i===void 0?"bytes":i,s=n.labelKilobytes,u=s===void 0?"KB":s,l=n.labelMegabytes,c=l===void 0?"MB":l,d=n.labelGigabytes,f=d===void 0?"GB":d;e=Math.round(Math.abs(e));var _=r,O=r*r,P=r*r*r;return e<_?e+" "+o:e<O?Math.floor(e/_)+" "+u:e<P?un(e/O,1,t)+" "+c:un(e/P,2,t)+" "+f},un=function(e,t,r){return e.toFixed(t).split(".").filter(function(n){return n!=="0"}).join(r)},na=function(e){var t=e.root,r=e.props,n=ct("span");n.className="filepond--file-info-main",te(n,"aria-hidden","true"),t.appendChild(n),t.ref.fileName=n;var i=ct("span");i.className="filepond--file-info-sub",t.appendChild(i),t.ref.fileSize=i,He(i,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),He(n,Rr(t.query("GET_ITEM_NAME",r.id)))},Or=function(e){var t=e.root,r=e.props;He(t.ref.fileSize,sn(t.query("GET_ITEM_SIZE",r.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),He(t.ref.fileName,Rr(t.query("GET_ITEM_NAME",r.id)))},ln=function(e){var t=e.root,r=e.props;if(le(t.query("GET_ITEM_SIZE",r.id))){Or({root:t,props:r});return}He(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},ia=v({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:T({DID_LOAD_ITEM:Or,DID_UPDATE_ITEM_META:Or,DID_THROW_ITEM_LOAD_ERROR:ln,DID_THROW_ITEM_INVALID:ln}),didCreateView:function(e){_t("CREATE_VIEW",Object.assign({},e,{view:e}))},create:na,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),cn=function(e){return Math.round(e*100)},aa=function(e){var t=e.root,r=ct("span");r.className="filepond--file-status-main",t.appendChild(r),t.ref.main=r;var n=ct("span");n.className="filepond--file-status-sub",t.appendChild(n),t.ref.sub=n,fn({root:t,action:{progress:null}})},fn=function(e){var t=e.root,r=e.action,n=r.progress===null?t.query("GET_LABEL_FILE_LOADING"):t.query("GET_LABEL_FILE_LOADING")+" "+cn(r.progress)+"%";He(t.ref.main,n),He(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},oa=function(e){var t=e.root,r=e.action,n=r.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):t.query("GET_LABEL_FILE_PROCESSING")+" "+cn(r.progress)+"%";He(t.ref.main,n),He(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},sa=function(e){var t=e.root;He(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),He(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},ua=function(e){var t=e.root;He(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),He(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},la=function(e){var t=e.root;He(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),He(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},dn=function(e){var t=e.root;He(t.ref.main,""),He(t.ref.sub,"")},Xt=function(e){var t=e.root,r=e.action;He(t.ref.main,r.status.main),He(t.ref.sub,r.status.sub)},ca=v({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:T({DID_LOAD_ITEM:dn,DID_REVERT_ITEM_PROCESSING:dn,DID_REQUEST_ITEM_PROCESSING:sa,DID_ABORT_ITEM_PROCESSING:ua,DID_COMPLETE_ITEM_PROCESSING:la,DID_UPDATE_ITEM_PROCESS_PROGRESS:oa,DID_UPDATE_ITEM_LOAD_PROGRESS:fn,DID_THROW_ITEM_LOAD_ERROR:Xt,DID_THROW_ITEM_INVALID:Xt,DID_THROW_ITEM_PROCESSING_ERROR:Xt,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Xt,DID_THROW_ITEM_REMOVE_ERROR:Xt}),didCreateView:function(e){_t("CREATE_VIEW",Object.assign({},e,{view:e}))},create:aa,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Ar={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},yr=[];Y(Ar,function(a){yr.push(a)});var rt=function(e){if(Dr(e)==="right")return 0;var t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},fa=function(e){var t=e.ref.buttonAbortItemLoad.rect.element;return t.width},ir=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.height/4)},da=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.left/2)},pa=function(e){return e.query("GET_STYLE_LOAD_INDICATOR_POSITION")},va=function(e){return e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")},Dr=function(e){return e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION")},Ea={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:pa},processProgressIndicator:{opacity:0,align:va},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},pn={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:rt},status:{translateX:rt}},Sr={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Nt={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:rt},status:{translateX:rt,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:rt},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Dr},info:{translateX:rt},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Dr},buttonRemoveItem:{opacity:1},info:{translateX:rt},status:{opacity:1,translateX:rt}},DID_LOAD_ITEM:pn,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:rt},status:{translateX:rt}},DID_START_ITEM_PROCESSING:Sr,DID_REQUEST_ITEM_PROCESSING:Sr,DID_UPDATE_ITEM_PROCESS_PROGRESS:Sr,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:rt}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:rt},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:pn},ga=v({create:function(e){var t=e.root;t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),ma=function(e){var t=e.root,r=e.props,n=Object.keys(Ar).reduce(function(x,W){return x[W]=Object.assign({},Ar[W]),x},{}),i=r.id,o=t.query("GET_ALLOW_REVERT"),s=t.query("GET_ALLOW_REMOVE"),u=t.query("GET_ALLOW_PROCESS"),l=t.query("GET_INSTANT_UPLOAD"),c=t.query("IS_ASYNC"),d=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN"),f;c?u&&!o?f=function(W){return!/RevertItemProcessing/.test(W)}:!u&&o?f=function(W){return!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(W)}:!u&&!o&&(f=function(W){return!/Process/.test(W)}):f=function(W){return!/Process/.test(W)};var _=f?yr.filter(f):yr.concat();if(l&&o&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!o){var O=Nt.DID_COMPLETE_ITEM_PROCESSING;O.info.translateX=da,O.info.translateY=ir,O.status.translateY=ir,O.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!u&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(function(x){Nt[x].status.translateY=ir}),Nt.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=fa),d&&o){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";var P=Nt.DID_COMPLETE_ITEM_PROCESSING;P.info.translateX=rt,P.status.translateY=ir,P.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}s||(n.RemoveItem.disabled=!0),Y(n,function(x,W){var C=t.createChildView(on,{label:t.query(W.label),icon:t.query(W.icon),opacity:0});_.includes(x)&&t.appendChildView(C),W.disabled&&(C.element.setAttribute("disabled","disabled"),C.element.setAttribute("hidden","hidden")),C.element.dataset.align=t.query("GET_STYLE_"+W.align),C.element.classList.add(W.className),C.on("click",function(ue){ue.stopPropagation(),!W.disabled&&t.dispatch(W.action,{query:i})}),t.ref["button"+x]=C}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(ga)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(ia,{id:i})),t.ref.status=t.appendChildView(t.createChildView(ca,{id:i}));var m=t.appendChildView(t.createChildView(an,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));m.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=m;var L=t.appendChildView(t.createChildView(an,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));L.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=L,t.ref.activeStyles=[]},Ia=function(e){var t=e.root,r=e.actions,n=e.props;Ta({root:t,actions:r,props:n});var i=r.concat().filter(function(s){return/^DID_/.test(s.type)}).reverse().find(function(s){return Nt[s.type]});if(i){t.ref.activeStyles=[];var o=Nt[i.type];Y(Ea,function(s,u){var l=t.ref[s];Y(u,function(c,d){var f=o[s]&&typeof o[s][c]<"u"?o[s][c]:d;t.ref.activeStyles.push({control:l,key:c,value:f})})})}t.ref.activeStyles.forEach(function(s){var u=s.control,l=s.key,c=s.value;u[l]=typeof c=="function"?c(t):c})},Ta=T({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function(e){var t=e.root,r=e.action;t.ref.buttonAbortItemProcessing.label=r.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function(e){var t=e.root,r=e.action;t.ref.buttonAbortItemLoad.label=r.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function(e){var t=e.root,r=e.action;t.ref.buttonAbortItemRemoval.label=r.value},DID_REQUEST_ITEM_PROCESSING:function(e){var t=e.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function(e){var t=e.root;t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function(e){var t=e.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function(e){var t=e.root,r=e.action;t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=r.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(e){var t=e.root,r=e.action;t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=r.progress}}),_a=v({create:ma,write:Ia,didCreateView:function(e){_t("CREATE_VIEW",Object.assign({},e,{view:e}))},name:"file"}),ha=function(e){var t=e.root,r=e.props;t.ref.fileName=ct("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(_a,{id:r.id})),t.ref.data=!1},Ra=function(e){var t=e.root,r=e.props;He(t.ref.fileName,Rr(t.query("GET_ITEM_NAME",r.id)))},Oa=v({create:ha,ignoreRect:!0,write:T({DID_LOAD_ITEM:Ra}),didCreateView:function(e){_t("CREATE_VIEW",Object.assign({},e,{view:e}))},tag:"fieldset",name:"file-wrapper"}),vn={type:"spring",damping:.6,mass:7},Aa=function(e){var t=e.root,r=e.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:vn},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:vn},styles:["translateY"]}}].forEach(function(n){ya(t,n,r.name)}),t.element.classList.add("filepond--"+r.name),t.ref.scalable=null},ya=function(e,t,r){var n=v({name:"panel-"+t.name+" filepond--"+r,mixins:t.mixins,ignoreRectUpdate:!0}),i=e.createChildView(n,t.props);e.ref[t.name]=e.appendChildView(i)},Da=function(e){var t=e.root,r=e.props;if((t.ref.scalable===null||r.scalable!==t.ref.scalable)&&(t.ref.scalable=b(r.scalable)?r.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!!r.height){var n=t.ref.top.rect.element,i=t.ref.bottom.rect.element,o=Math.max(n.height+i.height,r.height);t.ref.center.translateY=n.height,t.ref.center.scaleY=(o-n.height-i.height)/100,t.ref.bottom.translateY=o-i.height}},En=v({name:"panel",read:function(e){var t=e.root,r=e.props;return r.heightCurrent=t.ref.bottom.translateY},write:Da,create:Aa,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Sa=function(e){var t=e.map(function(n){return n.id}),r=void 0;return{setIndex:function(i){r=i},getIndex:function(){return r},getItemIndex:function(i){return t.indexOf(i.id)}}},gn={type:"spring",stiffness:.75,damping:.45,mass:10},mn="spring",In={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Pa=function(e){var t=e.root,r=e.props;if(t.ref.handleClick=function(i){return t.dispatch("DID_ACTIVATE_ITEM",{id:r.id})},t.element.id="filepond--item-"+r.id,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(Oa,{id:r.id})),t.ref.panel=t.appendChildView(t.createChildView(En,{name:"item-panel"})),t.ref.panel.height=null,r.markedForRemoval=!1,!!t.query("GET_ALLOW_REORDER")){t.element.dataset.dragState="idle";var n=function(o){if(o.isPrimary){var s=!1,u={x:o.pageX,y:o.pageY};r.dragOrigin={x:t.translateX,y:t.translateY},r.dragCenter={x:o.offsetX,y:o.offsetY};var l=Sa(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:r.id,dragState:l});var c=function(_){if(_.isPrimary){_.stopPropagation(),_.preventDefault(),r.dragOffset={x:_.pageX-u.x,y:_.pageY-u.y};var O=r.dragOffset.x*r.dragOffset.x+r.dragOffset.y*r.dragOffset.y;O>16&&!s&&(s=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:r.id,dragState:l})}},d=function f(_){_.isPrimary&&(document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",f),r.dragOffset={x:_.pageX-u.x,y:_.pageY-u.y},t.dispatch("DID_DROP_ITEM",{id:r.id,dragState:l}),s&&setTimeout(function(){return t.element.addEventListener("click",t.ref.handleClick)},0))};document.addEventListener("pointermove",c),document.addEventListener("pointerup",d)}};t.element.addEventListener("pointerdown",n)}},La=T({DID_UPDATE_PANEL_HEIGHT:function(e){var t=e.root,r=e.action;t.height=r.height}}),wa=T({DID_GRAB_ITEM:function(e){var t=e.root,r=e.props;r.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:function(e){var t=e.root;t.element.dataset.dragState="drag"},DID_DROP_ITEM:function(e){var t=e.root,r=e.props;r.dragOffset=null,r.dragOrigin=null,t.element.dataset.dragState="drop"}},function(a){var e=a.root,t=a.actions,r=a.props,n=a.shouldOptimize;e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");var i=t.concat().filter(function(s){return/^DID_/.test(s.type)}).reverse().find(function(s){return In[s.type]});i&&i.type!==r.currentState&&(r.currentState=i.type,e.element.dataset.filepondItemState=In[r.currentState]||"");var o=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");o?n||(e.height=e.rect.element.width*o):(La({root:e,actions:t,props:r}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),n&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),Ma=v({create:Pa,write:wa,destroy:function(e){var t=e.root,r=e.props;t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:r.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:mn,scaleY:mn,translateX:gn,translateY:gn,opacity:{type:"tween",duration:150}}}}),Pr=function(a,e){return Math.max(1,Math.floor((a+1)/e))},Lr=function(e,t,r){if(r){var n=e.rect.element.width,i=t.length,o=null;if(i===0||r.top<t[0].rect.element.top)return-1;var s=t[0],u=s.rect.element,l=u.marginLeft+u.marginRight,c=u.width+l,d=Pr(n,c);if(d===1){for(var f=0;f<i;f++){var _=t[f],O=_.rect.outer.top+_.rect.element.height*.5;if(r.top<O)return f}return i}for(var P=u.marginTop+u.marginBottom,m=u.height+P,L=0;L<i;L++){var x=L%d,W=Math.floor(L/d),C=x*c,ue=W*m,F=ue-u.marginTop,Ae=C+c,ye=ue+m+u.marginBottom;if(r.top<ye&&r.top>F){if(r.left<Ae)return L;L!==i-1?o=L:o=null}}return o!==null?o:i}},ar={height:0,width:0,get getHeight(){return this.height},set setHeight(a){(this.height===0||a===0)&&(this.height=a)},get getWidth(){return this.width},set setWidth(a){(this.width===0||a===0)&&(this.width=a)}},ba=function(e){var t=e.root;te(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},Ca=function(e){var t=e.root,r=e.action,n=r.id,i=r.index,o=r.interactionMethod;t.ref.addIndex=i;var s=Date.now(),u=s,l=1;if(o!==nt.NONE){l=0;var c=t.query("GET_ITEM_INSERT_INTERVAL"),d=s-t.ref.lastItemSpanwDate;u=d<c?s+(c-d):s}t.ref.lastItemSpanwDate=u,t.appendChildView(t.createChildView(Ma,{spawnDate:u,id:n,opacity:l,interactionMethod:o}),i)},Tn=function(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1;e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=r,Date.now()>e.spawnDate&&(e.opacity===0&&Na(e,t,r,n,i),e.scaleX=1,e.scaleY=1,e.opacity=1))},Na=function(e,t,r,n,i){e.interactionMethod===nt.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=r):e.interactionMethod===nt.DROP?(e.translateX=null,e.translateX=t-n*20,e.translateY=null,e.translateY=r-i*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===nt.BROWSE?(e.translateY=null,e.translateY=r-30):e.interactionMethod===nt.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Ga=function(e){var t=e.root,r=e.action,n=r.id,i=t.childViews.find(function(o){return o.id===n});i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},wr=function(e){return e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5},Fa=function(e){return e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5},Ba=function(e){var t=e.root,r=e.action,n=r.id,i=r.dragState,o=t.query("GET_ITEM",{id:n}),s=t.childViews.find(function(x){return x.id===n}),u=t.childViews.length,l=i.getItemIndex(o);if(s){var c={x:s.dragOrigin.x+s.dragOffset.x+s.dragCenter.x,y:s.dragOrigin.y+s.dragOffset.y+s.dragCenter.y},d=wr(s),f=Fa(s),_=Math.floor(t.rect.outer.width/f);_>u&&(_=u);var O=Math.floor(u/_+1);ar.setHeight=d*O,ar.setWidth=f*_;var P={y:Math.floor(c.y/d),x:Math.floor(c.x/f),getGridIndex:function(){return c.y>ar.getHeight||c.y<0||c.x>ar.getWidth||c.x<0?l:this.y*_+this.x},getColIndex:function(){for(var W=t.query("GET_ACTIVE_ITEMS"),C=t.childViews.filter(function(Z){return Z.rect.element.height}),ue=W.map(function(Z){return C.find(function(Le){return Le.id===Z.id})}),F=ue.findIndex(function(Z){return Z===s}),Ae=wr(s),ye=ue.length,U=ye,z=0,Q=0,B=0,q=0;q<ye;q++)if(z=wr(ue[q]),B=Q,Q=B+z,c.y<Q){if(F>q){if(c.y<B+Ae){U=q;break}continue}U=q;break}return U}},m=_>1?P.getGridIndex():P.getColIndex();t.dispatch("MOVE_ITEM",{query:s,index:m});var L=i.getIndex();if(L===void 0||L!==m){if(i.setIndex(m),L===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:l,target:m})}}},Ua=T({DID_ADD_ITEM:Ca,DID_REMOVE_ITEM:Ga,DID_DRAG_ITEM:Ba}),xa=function(e){var t=e.root,r=e.props,n=e.actions,i=e.shouldOptimize;Ua({root:t,props:r,actions:n});var o=r.dragCoordinates,s=t.rect.element.width,u=t.childViews.filter(function(U){return U.rect.element.height}),l=t.query("GET_ACTIVE_ITEMS").map(function(U){return u.find(function(z){return z.id===U.id})}).filter(function(U){return U}),c=o?Lr(t,l,o):null,d=t.ref.addIndex||null;t.ref.addIndex=null;var f=0,_=0,O=0;if(l.length!==0){var P=l[0].rect.element,m=P.marginTop+P.marginBottom,L=P.marginLeft+P.marginRight,x=P.width+L,W=P.height+m,C=Pr(s,x);if(C===1){var ue=0,F=0;l.forEach(function(U,z){if(c){var Q=z-c;Q===-2?F=-m*.25:Q===-1?F=-m*.75:Q===0?F=m*.75:Q===1?F=m*.25:F=0}i&&(U.translateX=null,U.translateY=null),U.markedForRemoval||Tn(U,0,ue+F);var B=U.rect.element.height+m,q=B*(U.markedForRemoval?U.opacity:1);ue+=q})}else{var Ae=0,ye=0;l.forEach(function(U,z){z===c&&(f=1),z===d&&(O+=1),U.markedForRemoval&&U.opacity<.5&&(_-=1);var Q=z+O+f+_,B=Q%C,q=Math.floor(Q/C),Z=B*x,Le=q*W,Re=Math.sign(Z-Ae),J=Math.sign(Le-ye);Ae=Z,ye=Le,!U.markedForRemoval&&(i&&(U.translateX=null,U.translateY=null),Tn(U,Z,Le,Re,J))})}}},Va=function(e,t){return t.filter(function(r){return r.data&&r.data.id?e.id===r.data.id:!0})},qa=v({create:ba,write:xa,tag:"ul",name:"list",didWriteView:function(e){var t=e.root;t.childViews.filter(function(r){return r.markedForRemoval&&r.opacity===0&&r.resting}).forEach(function(r){r._destroy(),t.removeChildView(r)})},filterFrameActionsForChild:Va,mixins:{apis:["dragCoordinates"]}}),Ya=function(e){var t=e.root,r=e.props;t.ref.list=t.appendChildView(t.createChildView(qa)),r.dragCoordinates=null,r.overflowing=!1},Ha=function(e){var t=e.root,r=e.props,n=e.action;t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(r.dragCoordinates={left:n.position.scopeLeft-t.ref.list.rect.element.left,top:n.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},Wa=function(e){var t=e.props;t.dragCoordinates=null},za=T({DID_DRAG:Ha,DID_END_DRAG:Wa}),ja=function(e){var t=e.root,r=e.props,n=e.actions;if(za({root:t,props:r,actions:n}),t.ref.list.dragCoordinates=r.dragCoordinates,r.overflowing&&!r.overflow&&(r.overflowing=!1,t.element.dataset.state="",t.height=null),r.overflow){var i=Math.round(r.overflow);i!==t.height&&(r.overflowing=!0,t.element.dataset.state="overflow",t.height=i)}},Xa=v({create:Ya,write:ja,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),ut=function(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";r?te(e,t,n):e.removeAttribute(t)},ka=function(e){if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){var t=ct("form"),r=e.parentNode,n=e.nextSibling;t.appendChild(e),t.reset(),n?r.insertBefore(e,n):r.appendChild(e)}}},$a=function(e){var t=e.root,r=e.props;t.element.id="filepond--browser-"+r.id,te(t.element,"name",t.query("GET_NAME")),te(t.element,"aria-controls","filepond--assistant-"+r.id),te(t.element,"aria-labelledby","filepond--drop-label-"+r.id),_n({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),hn({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),Rn({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Mr({root:t}),On({root:t,action:{value:t.query("GET_REQUIRED")}}),An({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=function(n){if(t.element.value){var i=Array.from(t.element.files).map(function(o){return o._relativePath=o.webkitRelativePath,o});setTimeout(function(){r.onload(i),ka(t.element)},250)}},t.element.addEventListener("change",t.ref.handleChange)},_n=function(e){var t=e.root,r=e.action;t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&ut(t.element,"accept",!!r.value,r.value?r.value.join(","):"")},hn=function(e){var t=e.root,r=e.action;ut(t.element,"multiple",r.value)},Rn=function(e){var t=e.root,r=e.action;ut(t.element,"webkitdirectory",r.value)},Mr=function(e){var t=e.root,r=t.query("GET_DISABLED"),n=t.query("GET_ALLOW_BROWSE"),i=r||!n;ut(t.element,"disabled",i)},On=function(e){var t=e.root,r=e.action;r.value?t.query("GET_TOTAL_ITEMS")===0&&ut(t.element,"required",!0):ut(t.element,"required",!1)},An=function(e){var t=e.root,r=e.action;ut(t.element,"capture",!!r.value,r.value===!0?"":r.value)},yn=function(e){var t=e.root,r=t.element;if(t.query("GET_TOTAL_ITEMS")>0)ut(r,"required",!1),ut(r,"name",!1);else{ut(r,"name",!0,t.query("GET_NAME"));var n=t.query("GET_CHECK_VALIDITY");n&&r.setCustomValidity(""),t.query("GET_REQUIRED")&&ut(r,"required",!0)}},Qa=function(e){var t=e.root,r=t.query("GET_CHECK_VALIDITY");r&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},Za=v({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:$a,destroy:function(e){var t=e.root;t.element.removeEventListener("change",t.ref.handleChange)},write:T({DID_LOAD_ITEM:yn,DID_REMOVE_ITEM:yn,DID_THROW_ITEM_INVALID:Qa,DID_SET_DISABLED:Mr,DID_SET_ALLOW_BROWSE:Mr,DID_SET_ALLOW_DIRECTORIES_ONLY:Rn,DID_SET_ALLOW_MULTIPLE:hn,DID_SET_ACCEPTED_FILE_TYPES:_n,DID_SET_CAPTURE_METHOD:An,DID_SET_REQUIRED:On})}),Dn={ENTER:13,SPACE:32},Ka=function(e){var t=e.root,r=e.props,n=ct("label");te(n,"for","filepond--browser-"+r.id),te(n,"id","filepond--drop-label-"+r.id),te(n,"aria-hidden","true"),t.ref.handleKeyDown=function(i){var o=i.keyCode===Dn.ENTER||i.keyCode===Dn.SPACE;o&&(i.preventDefault(),t.ref.label.click())},t.ref.handleClick=function(i){var o=i.target===n||n.contains(i.target);o||t.ref.label.click()},n.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),Sn(n,r.caption),t.appendChild(n),t.ref.label=n},Sn=function(e,t){e.innerHTML=t;var r=e.querySelector(".filepond--label-action");return r&&te(r,"tabindex","0"),t},Ja=v({name:"drop-label",ignoreRect:!0,create:Ka,destroy:function(e){var t=e.root;t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:T({DID_SET_LABEL_IDLE:function(e){var t=e.root,r=e.action;Sn(t.ref.label,r.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),eo=v({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),to=function(e){var t=e.root,r=t.rect.element.width*.5,n=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(eo,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:r,translateY:n}))},ro=function(e){var t=e.root,r=e.action;if(!t.ref.blob){to({root:t});return}t.ref.blob.translateX=r.position.scopeLeft,t.ref.blob.translateY=r.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},no=function(e){var t=e.root;t.ref.blob&&(t.ref.blob.opacity=0)},io=function(e){var t=e.root;t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},ao=function(e){var t=e.root,r=e.props,n=e.actions;oo({root:t,props:r,actions:n});var i=t.ref.blob;n.length===0&&i&&i.opacity===0&&(t.removeChildView(i),t.ref.blob=null)},oo=T({DID_DRAG:ro,DID_DROP:io,DID_END_DRAG:no}),so=v({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:ao}),Pn=function(e,t){try{var r=new DataTransfer;t.forEach(function(n){n instanceof File?r.items.add(n):r.items.add(new File([n],n.name,{type:n.type}))}),e.files=r.files}catch{return!1}return!0},uo=function(e){var t=e.root;return t.ref.fields={}},or=function(e,t){return e.ref.fields[t]},br=function(e){e.query("GET_ACTIVE_ITEMS").forEach(function(t){e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},Ln=function(e){var t=e.root;return br(t)},lo=function(e){var t=e.root,r=e.action,n=t.query("GET_ITEM",r.id),i=n.origin===ze.LOCAL,o=!i&&t.query("SHOULD_UPDATE_FILE_INPUT"),s=ct("input");s.type=o?"file":"hidden",s.name=t.query("GET_NAME"),s.disabled=t.query("GET_DISABLED"),t.ref.fields[r.id]=s,br(t)},co=function(e){var t=e.root,r=e.action,n=or(t,r.id);if(n&&(r.serverFileReference!==null&&(n.value=r.serverFileReference),!!t.query("SHOULD_UPDATE_FILE_INPUT"))){var i=t.query("GET_ITEM",r.id);Pn(n,[i.file])}},fo=function(e){var t=e.root,r=e.action;t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(function(){var n=or(t,r.id);n&&Pn(n,[r.file])},0)},po=function(e){var t=e.root;t.element.disabled=t.query("GET_DISABLED")},vo=function(e){var t=e.root,r=e.action,n=or(t,r.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete t.ref.fields[r.id])},Eo=function(e){var t=e.root,r=e.action,n=or(t,r.id);n&&(r.value===null?n.removeAttribute("value"):n.value=r.value,br(t))},go=T({DID_SET_DISABLED:po,DID_ADD_ITEM:lo,DID_LOAD_ITEM:co,DID_REMOVE_ITEM:vo,DID_DEFINE_VALUE:Eo,DID_PREPARE_OUTPUT:fo,DID_REORDER_ITEMS:Ln,DID_SORT_ITEMS:Ln}),mo=v({tag:"fieldset",name:"data",create:uo,write:go,ignoreRect:!0}),Io=function(e){return"getRootNode"in e?e.getRootNode():document},To=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],_o=["css","csv","html","txt"],ho={zip:"zip|compressed",epub:"application/epub+zip"},wn=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e=e.toLowerCase(),To.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):_o.includes(e)?"text/"+e:ho[e]||""},Cr=function(e){return new Promise(function(t,r){var n=Lo(e);if(n.length&&!Ro(e))return t(n);Oo(e).then(t)})},Ro=function(e){return e.files?e.files.length>0:!1},Oo=function(e){return new Promise(function(t,r){var n=(e.items?Array.from(e.items):[]).filter(function(i){return Ao(i)}).map(function(i){return yo(i)});if(!n.length){t(e.files?Array.from(e.files):[]);return}Promise.all(n).then(function(i){var o=[];i.forEach(function(s){o.push.apply(o,s)}),t(o.filter(function(s){return s}).map(function(s){return s._relativePath||(s._relativePath=s.webkitRelativePath),s}))}).catch(console.error)})},Ao=function(e){if(Mn(e)){var t=Nr(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},yo=function(e){return new Promise(function(t,r){if(Po(e)){Do(Nr(e)).then(t).catch(r);return}t([e.getAsFile()])})},Do=function(e){return new Promise(function(t,r){var n=[],i=0,o=0,s=function(){o===0&&i===0&&t(n)},u=function l(c){i++;var d=c.createReader(),f=function _(){d.readEntries(function(O){if(O.length===0){i--,s();return}O.forEach(function(P){P.isDirectory?l(P):(o++,P.file(function(m){var L=So(m);P.fullPath&&(L._relativePath=P.fullPath),n.push(L),o--,s()}))}),_()},r)};f()};u(e)})},So=function(e){if(e.type.length)return e;var t=e.lastModifiedDate,r=e.name,n=wn(rr(e.name));return n.length&&(e=e.slice(0,e.size,n),e.name=r,e.lastModifiedDate=t),e},Po=function(e){return Mn(e)&&(Nr(e)||{}).isDirectory},Mn=function(e){return"webkitGetAsEntry"in e},Nr=function(e){return e.webkitGetAsEntry()},Lo=function(e){var t=[];try{if(t=Mo(e),t.length)return t;t=wo(e)}catch{}return t},wo=function(e){var t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},Mo=function(e){var t=e.getData("text/html");if(typeof t=="string"&&t.length){var r=t.match(/src\s*=\s*"(.+?)"/);if(r)return[r[1]]}return[]},sr=[],At=function(e){return{pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}},bo=function(e,t,r){var n=Co(t),i={element:e,filterElement:r,state:null,ondrop:function(){},onenter:function(){},ondrag:function(){},onexit:function(){},onload:function(){},allowdrop:function(){}};return i.destroy=n.addListener(i),i},Co=function(e){var t=sr.find(function(n){return n.element===e});if(t)return t;var r=No(e);return sr.push(r),r},No=function(e){var t=[],r={dragenter:Fo,dragover:Bo,dragleave:xo,drop:Uo},n={};Y(r,function(o,s){n[o]=s(e,t),e.addEventListener(o,n[o],!1)});var i={element:e,addListener:function(s){return t.push(s),function(){t.splice(t.indexOf(s),1),t.length===0&&(sr.splice(sr.indexOf(i),1),Y(r,function(u){e.removeEventListener(u,n[u],!1)}))}}};return i},Go=function(e,t){return"elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)},Gr=function(e,t){var r=Io(t),n=Go(r,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return n===t||t.contains(n)},bn=null,ur=function(e,t){try{e.dropEffect=t}catch{}},Fo=function(e,t){return function(r){r.preventDefault(),bn=r.target,t.forEach(function(n){var i=n.element,o=n.onenter;Gr(r,i)&&(n.state="enter",o(At(r)))})}},Bo=function(e,t){return function(r){r.preventDefault();var n=r.dataTransfer;Cr(n).then(function(i){var o=!1;t.some(function(s){var u=s.filterElement,l=s.element,c=s.onenter,d=s.onexit,f=s.ondrag,_=s.allowdrop;ur(n,"copy");var O=_(i);if(!O){ur(n,"none");return}if(Gr(r,l)){if(o=!0,s.state===null){s.state="enter",c(At(r));return}if(s.state="over",u&&!O){ur(n,"none");return}f(At(r))}else u&&!o&&ur(n,"none"),s.state&&(s.state=null,d(At(r)))})})}},Uo=function(e,t){return function(r){r.preventDefault();var n=r.dataTransfer;Cr(n).then(function(i){t.forEach(function(o){var s=o.filterElement,u=o.element,l=o.ondrop,c=o.onexit,d=o.allowdrop;if(o.state=null,!(s&&!Gr(r,u))){if(!d(i))return c(At(r));l(At(r),i)}})})}},xo=function(e,t){return function(r){bn===r.target&&t.forEach(function(n){var i=n.onexit;n.state=null,i(At(r))})}},Vo=function(e,t,r){e.classList.add("filepond--hopper");var n=r.catchesDropsOnPage,i=r.requiresDropOnElement,o=r.filterItems,s=o===void 0?function(f){return f}:o,u=bo(e,n?document.documentElement:e,i),l="",c="";u.allowdrop=function(f){return t(s(f))},u.ondrop=function(f,_){var O=s(_);if(!t(O)){d.ondragend(f);return}c="drag-drop",d.onload(O,f)},u.ondrag=function(f){d.ondrag(f)},u.onenter=function(f){c="drag-over",d.ondragstart(f)},u.onexit=function(f){c="drag-exit",d.ondragend(f)};var d={updateHopperState:function(){l!==c&&(e.dataset.hopperState=c,l=c)},onload:function(){},ondragstart:function(){},ondrag:function(){},ondragend:function(){},destroy:function(){u.destroy()}};return d},Fr=!1,Gt=[],Cn=function(e){var t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){for(var r=!1,n=t;n!==document.body;){if(n.classList.contains("filepond--root")){r=!0;break}n=n.parentNode}if(!r)return}Cr(e.clipboardData).then(function(i){i.length&&Gt.forEach(function(o){return o(i)})})},qo=function(e){Gt.includes(e)||(Gt.push(e),!Fr&&(Fr=!0,document.addEventListener("paste",Cn)))},Yo=function(e){Er(Gt,Gt.indexOf(e)),Gt.length===0&&(document.removeEventListener("paste",Cn),Fr=!1)},Ho=function(){var e=function(n){t.onload(n)},t={destroy:function(){Yo(e)},onload:function(){}};return qo(e),t},Wo=function(e){var t=e.root,r=e.props;t.element.id="filepond--assistant-"+r.id,te(t.element,"role","status"),te(t.element,"aria-live","polite"),te(t.element,"aria-relevant","additions")},Nn=null,Gn=null,Br=[],lr=function(e,t){e.element.textContent=t},zo=function(e){e.element.textContent=""},Fn=function(e,t,r){var n=e.query("GET_TOTAL_ITEMS");lr(e,r+" "+t+", "+n+" "+(n===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL"))),clearTimeout(Gn),Gn=setTimeout(function(){zo(e)},1500)},Bn=function(e){return e.element.parentNode.contains(document.activeElement)},jo=function(e){var t=e.root,r=e.action;if(Bn(t)){t.element.textContent="";var n=t.query("GET_ITEM",r.id);Br.push(n.filename),clearTimeout(Nn),Nn=setTimeout(function(){Fn(t,Br.join(", "),t.query("GET_LABEL_FILE_ADDED")),Br.length=0},750)}},Xo=function(e){var t=e.root,r=e.action;if(Bn(t)){var n=r.item;Fn(t,n.filename,t.query("GET_LABEL_FILE_REMOVED"))}},ko=function(e){var t=e.root,r=e.action,n=t.query("GET_ITEM",r.id),i=n.filename,o=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");lr(t,i+" "+o)},Un=function(e){var t=e.root,r=e.action,n=t.query("GET_ITEM",r.id),i=n.filename,o=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");lr(t,i+" "+o)},cr=function(e){var t=e.root,r=e.action,n=t.query("GET_ITEM",r.id),i=n.filename;lr(t,r.status.main+" "+i+" "+r.status.sub)},$o=v({create:Wo,ignoreRect:!0,ignoreRectUpdate:!0,write:T({DID_LOAD_ITEM:jo,DID_REMOVE_ITEM:Xo,DID_COMPLETE_ITEM_PROCESSING:ko,DID_ABORT_ITEM_PROCESSING:Un,DID_REVERT_ITEM_PROCESSING:Un,DID_THROW_ITEM_REMOVE_ERROR:cr,DID_THROW_ITEM_LOAD_ERROR:cr,DID_THROW_ITEM_INVALID:cr,DID_THROW_ITEM_PROCESSING_ERROR:cr}),tag:"span",name:"assistant"}),xn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-";return e.replace(new RegExp(t+".","g"),function(r){return r.charAt(1).toUpperCase()})},Vn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=Date.now(),i=null;return function(){for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];clearTimeout(i);var l=Date.now()-n,c=function(){n=Date.now(),e.apply(void 0,s)};l<t?r||(i=setTimeout(c,t-l)):c()}},Qo=1e6,fr=function(e){return e.preventDefault()},Zo=function(e){var t=e.root,r=e.props,n=t.query("GET_ID");n&&(t.element.id=n);var i=t.query("GET_CLASS_NAME");i&&i.split(" ").filter(function(d){return d.length}).forEach(function(d){t.element.classList.add(d)}),t.ref.label=t.appendChildView(t.createChildView(Ja,Object.assign({},r,{translateY:null,caption:t.query("GET_LABEL_IDLE")}))),t.ref.list=t.appendChildView(t.createChildView(Xa,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(En,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView($o,Object.assign({},r))),t.ref.data=t.appendChildView(t.createChildView(mo,Object.assign({},r))),t.ref.measure=ct("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(function(d){return!N(d.value)}).map(function(d){var f=d.name,_=d.value;t.element.dataset[f]=_}),t.ref.widthPrevious=null,t.ref.widthUpdated=Vn(function(){t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];var o=window.matchMedia("(pointer: fine) and (hover: hover)").matches,s="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&s&&!o&&(t.element.addEventListener("touchmove",fr,{passive:!1}),t.element.addEventListener("gesturestart",fr));var u=t.query("GET_CREDITS"),l=u.length===2;if(l){var c=document.createElement("a");c.className="filepond--credits",c.setAttribute("aria-hidden","true"),c.href=u[0],c.tabindex=-1,c.target="_blank",c.rel="noopener noreferrer",c.textContent=u[1],t.element.appendChild(c),t.ref.credits=c}},Ko=function(e){var t=e.root,r=e.props,n=e.actions;if(ns({root:t,props:r,actions:n}),n.filter(function(Ee){return/^DID_SET_STYLE_/.test(Ee.type)}).filter(function(Ee){return!N(Ee.data.value)}).map(function(Ee){var Te=Ee.type,Ft=Ee.data,kt=xn(Te.substring(8).toLowerCase(),"_");t.element.dataset[kt]=Ft.value,t.invalidateLayout()}),!t.rect.element.hidden){t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());var i=t.ref.bounds;i||(i=t.ref.bounds=ts(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);var o=t.ref,s=o.hopper,u=o.label,l=o.list,c=o.panel;s&&s.updateHopperState();var d=t.query("GET_PANEL_ASPECT_RATIO"),f=t.query("GET_ALLOW_MULTIPLE"),_=t.query("GET_TOTAL_ITEMS"),O=f?t.query("GET_MAX_FILES")||Qo:1,P=_===O,m=n.find(function(Ee){return Ee.type==="DID_ADD_ITEM"});if(P&&m){var L=m.data.interactionMethod;u.opacity=0,f?u.translateY=-40:L===nt.API?u.translateX=40:L===nt.BROWSE?u.translateY=40:u.translateY=30}else P||(u.opacity=1,u.translateX=0,u.translateY=0);var x=Jo(t),W=es(t),C=u.rect.element.height,ue=!f||P?0:C,F=P?l.rect.element.marginTop:0,Ae=_===0?0:l.rect.element.marginBottom,ye=ue+F+W.visual+Ae,U=ue+F+W.bounds+Ae;if(l.translateY=Math.max(0,ue-l.rect.element.marginTop)-x.top,d){var z=t.rect.element.width,Q=z*d;d!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=d,t.ref.updateHistory=[]);var B=t.ref.updateHistory;B.push(z);var q=2;if(B.length>q*2){for(var Z=B.length,Le=Z-10,Re=0,J=Z;J>=Le;J--)if(B[J]===B[J-2]&&Re++,Re>=q)return}c.scalable=!1,c.height=Q;var R=Q-ue-(Ae-x.bottom)-(P?F:0);W.visual>R?l.overflow=R:l.overflow=null,t.height=Q}else if(i.fixedHeight){c.scalable=!1;var g=i.fixedHeight-ue-(Ae-x.bottom)-(P?F:0);W.visual>g?l.overflow=g:l.overflow=null}else if(i.cappedHeight){var H=ye>=i.cappedHeight,ae=Math.min(i.cappedHeight,ye);c.scalable=!0,c.height=H?ae:ae-x.top-x.bottom;var ce=ae-ue-(Ae-x.bottom)-(P?F:0);ye>i.cappedHeight&&W.visual>ce?l.overflow=ce:l.overflow=null,t.height=Math.min(i.cappedHeight,U-x.top-x.bottom)}else{var ge=_>0?x.top+x.bottom:0;c.scalable=!0,c.height=Math.max(C,ye-ge),t.height=Math.max(C,U-ge)}t.ref.credits&&c.heightCurrent&&(t.ref.credits.style.transform="translateY("+c.heightCurrent+"px)")}},Jo=function(e){var t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},es=function(e){var t=0,r=0,n=e.ref.list,i=n.childViews[0],o=i.childViews.filter(function(W){return W.rect.element.height}),s=e.query("GET_ACTIVE_ITEMS").map(function(W){return o.find(function(C){return C.id===W.id})}).filter(function(W){return W});if(s.length===0)return{visual:t,bounds:r};var u=i.rect.element.width,l=Lr(i,s,n.dragCoordinates),c=s[0].rect.element,d=c.marginTop+c.marginBottom,f=c.marginLeft+c.marginRight,_=c.width+f,O=c.height+d,P=typeof l<"u"&&l>=0?1:0,m=s.find(function(W){return W.markedForRemoval&&W.opacity<.45})?-1:0,L=s.length+P+m,x=Pr(u,_);return x===1?s.forEach(function(W){var C=W.rect.element.height+d;r+=C,t+=C*W.opacity}):(r=Math.ceil(L/x)*O,t=r),{visual:t,bounds:r}},ts=function(e){var t=e.ref.measureHeight||null,r=parseInt(e.style.maxHeight,10)||null,n=t===0?null:t;return{cappedHeight:r,fixedHeight:n}},Ur=function(e,t){var r=e.query("GET_ALLOW_REPLACE"),n=e.query("GET_ALLOW_MULTIPLE"),i=e.query("GET_TOTAL_ITEMS"),o=e.query("GET_MAX_FILES"),s=t.length;if(!n&&s>1)return e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Ye("warning",0,"Max files")}),!0;if(o=n?o:1,!n&&r)return!1;var u=le(o);return u&&i+s>o?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Ye("warning",0,"Max files")}),!0):!1},rs=function(e,t,r){var n=e.childViews[0];return Lr(n,t,{left:r.scopeLeft-n.rect.element.left,top:r.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},qn=function(e){var t=e.query("GET_ALLOW_DROP"),r=e.query("GET_DISABLED"),n=t&&!r;if(n&&!e.ref.hopper){var i=Vo(e.element,function(o){var s=e.query("GET_BEFORE_DROP_FILE")||function(){return!0},u=e.query("GET_DROP_VALIDATION");return u?o.every(function(l){return _t("ALLOW_HOPPER_ITEM",l,{query:e.query}).every(function(c){return c===!0})&&s(l)}):!0},{filterItems:function(s){var u=e.query("GET_IGNORED_FILES");return s.filter(function(l){return Ct(l)?!u.includes(l.name.toLowerCase()):!0})},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});i.onload=function(o,s){var u=e.ref.list.childViews[0],l=u.childViews.filter(function(d){return d.rect.element.height}),c=e.query("GET_ACTIVE_ITEMS").map(function(d){return l.find(function(f){return f.id===d.id})}).filter(function(d){return d});ot("ADD_ITEMS",o,{dispatch:e.dispatch}).then(function(d){if(Ur(e,d))return!1;e.dispatch("ADD_ITEMS",{items:d,index:rs(e.ref.list,c,s),interactionMethod:nt.DROP})}),e.dispatch("DID_DROP",{position:s}),e.dispatch("DID_END_DRAG",{position:s})},i.ondragstart=function(o){e.dispatch("DID_START_DRAG",{position:o})},i.ondrag=Vn(function(o){e.dispatch("DID_DRAG",{position:o})}),i.ondragend=function(o){e.dispatch("DID_END_DRAG",{position:o})},e.ref.hopper=i,e.ref.drip=e.appendChildView(e.createChildView(so))}else!n&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Yn=function(e,t){var r=e.query("GET_ALLOW_BROWSE"),n=e.query("GET_DISABLED"),i=r&&!n;i&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Za,Object.assign({},t,{onload:function(s){ot("ADD_ITEMS",s,{dispatch:e.dispatch}).then(function(u){if(Ur(e,u))return!1;e.dispatch("ADD_ITEMS",{items:u,index:-1,interactionMethod:nt.BROWSE})})}})),0):!i&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Hn=function(e){var t=e.query("GET_ALLOW_PASTE"),r=e.query("GET_DISABLED"),n=t&&!r;n&&!e.ref.paster?(e.ref.paster=Ho(),e.ref.paster.onload=function(i){ot("ADD_ITEMS",i,{dispatch:e.dispatch}).then(function(o){if(Ur(e,o))return!1;e.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:nt.PASTE})})}):!n&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},ns=T({DID_SET_ALLOW_BROWSE:function(e){var t=e.root,r=e.props;Yn(t,r)},DID_SET_ALLOW_DROP:function(e){var t=e.root;qn(t)},DID_SET_ALLOW_PASTE:function(e){var t=e.root;Hn(t)},DID_SET_DISABLED:function(e){var t=e.root,r=e.props;qn(t),Hn(t),Yn(t,r);var n=t.query("GET_DISABLED");n?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),is=v({name:"root",read:function(e){var t=e.root;t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:Zo,write:Ko,destroy:function(e){var t=e.root;t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",fr),t.element.removeEventListener("gesturestart",fr)},mixins:{styles:["height"]}}),as=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=null,r=er(),n=qe(ei(r),[Oi,ni(r)],[$i,ri(r)]);n.dispatch("SET_OPTIONS",{options:e});var i=function(){document.hidden||n.dispatch("KICK")};document.addEventListener("visibilitychange",i);var o=null,s=!1,u=!1,l=null,c=null,d=function(){s||(s=!0),clearTimeout(o),o=setTimeout(function(){s=!1,l=null,c=null,u&&(u=!1,n.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",d);var f=is(n,{id:vr()}),_=!1,O=!1,P={_read:function(){s&&(c=window.innerWidth,l||(l=c),!u&&c!==l&&(n.dispatch("DID_START_RESIZE"),u=!0)),O&&_&&(_=f.element.offsetParent===null),!_&&(f._read(),O=f.rect.element.hidden)},_write:function(R){var g=n.processActionQueue().filter(function(H){return!/^SET_/.test(H.type)});_&&!g.length||(W(g),_=f._write(R,g,u),fi(n.query("GET_ITEMS")),_&&n.processDispatchQueue())}},m=function(R){return function(g){var H={type:R};if(!g)return H;if(g.hasOwnProperty("error")&&(H.error=g.error?Object.assign({},g.error):null),g.status&&(H.status=Object.assign({},g.status)),g.file&&(H.output=g.file),g.source)H.file=g.source;else if(g.item||g.id){var ae=g.item?g.item:n.query("GET_ITEM",g.id);H.file=ae?et(ae):null}return g.items&&(H.items=g.items.map(et)),/progress/.test(R)&&(H.progress=g.progress),g.hasOwnProperty("origin")&&g.hasOwnProperty("target")&&(H.origin=g.origin,H.target=g.target),H}},L={DID_DESTROY:m("destroy"),DID_INIT:m("init"),DID_THROW_MAX_FILES:m("warning"),DID_INIT_ITEM:m("initfile"),DID_START_ITEM_LOAD:m("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:m("addfileprogress"),DID_LOAD_ITEM:m("addfile"),DID_THROW_ITEM_INVALID:[m("error"),m("addfile")],DID_THROW_ITEM_LOAD_ERROR:[m("error"),m("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[m("error"),m("removefile")],DID_PREPARE_OUTPUT:m("preparefile"),DID_START_ITEM_PROCESSING:m("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:m("processfileprogress"),DID_ABORT_ITEM_PROCESSING:m("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:m("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:m("processfiles"),DID_REVERT_ITEM_PROCESSING:m("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[m("error"),m("processfile")],DID_REMOVE_ITEM:m("removefile"),DID_UPDATE_ITEMS:m("updatefiles"),DID_ACTIVATE_ITEM:m("activatefile"),DID_REORDER_ITEMS:m("reorderfiles")},x=function(R){var g=Object.assign({pond:Re},R);delete g.type,f.element.dispatchEvent(new CustomEvent("FilePond:"+R.type,{detail:g,bubbles:!0,cancelable:!0,composed:!0}));var H=[];R.hasOwnProperty("error")&&H.push(R.error),R.hasOwnProperty("file")&&H.push(R.file);var ae=["type","error","file"];Object.keys(R).filter(function(ge){return!ae.includes(ge)}).forEach(function(ge){return H.push(R[ge])}),Re.fire.apply(Re,[R.type].concat(H));var ce=n.query("GET_ON"+R.type.toUpperCase());ce&&ce.apply(void 0,H)},W=function(R){R.length&&R.filter(function(g){return L[g.type]}).forEach(function(g){var H=L[g.type];(Array.isArray(H)?H:[H]).forEach(function(ae){g.type==="DID_INIT_ITEM"?x(ae(g.data)):setTimeout(function(){x(ae(g.data))},0)})})},C=function(R){return n.dispatch("SET_OPTIONS",{options:R})},ue=function(R){return n.query("GET_ACTIVE_ITEM",R)},F=function(R){return new Promise(function(g,H){n.dispatch("REQUEST_ITEM_PREPARE",{query:R,success:function(ce){g(ce)},failure:function(ce){H(ce)}})})},Ae=function(R){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(H,ae){z([{source:R,options:g}],{index:g.index}).then(function(ce){return H(ce&&ce[0])}).catch(ae)})},ye=function(R){return R.file&&R.id},U=function(R,g){return typeof R=="object"&&!ye(R)&&!g&&(g=R,R=void 0),n.dispatch("REMOVE_ITEM",Object.assign({},g,{query:R})),n.query("GET_ACTIVE_ITEM",R)===null},z=function(){for(var R=arguments.length,g=new Array(R),H=0;H<R;H++)g[H]=arguments[H];return new Promise(function(ae,ce){var ge=[],Ee={};if(G(g[0]))ge.push.apply(ge,g[0]),Object.assign(Ee,g[1]||{});else{var Te=g[g.length-1];typeof Te=="object"&&!(Te instanceof Blob)&&Object.assign(Ee,g.pop()),ge.push.apply(ge,g)}n.dispatch("ADD_ITEMS",{items:ge,index:Ee.index,interactionMethod:nt.API,success:ae,failure:ce})})},Q=function(){return n.query("GET_ACTIVE_ITEMS")},B=function(R){return new Promise(function(g,H){n.dispatch("REQUEST_ITEM_PROCESSING",{query:R,success:function(ce){g(ce)},failure:function(ce){H(ce)}})})},q=function(){for(var R=arguments.length,g=new Array(R),H=0;H<R;H++)g[H]=arguments[H];var ae=Array.isArray(g[0])?g[0]:g,ce=ae.length?ae:Q();return Promise.all(ce.map(F))},Z=function(){for(var R=arguments.length,g=new Array(R),H=0;H<R;H++)g[H]=arguments[H];var ae=Array.isArray(g[0])?g[0]:g;if(!ae.length){var ce=Q().filter(function(ge){return!(ge.status===se.IDLE&&ge.origin===ze.LOCAL)&&ge.status!==se.PROCESSING&&ge.status!==se.PROCESSING_COMPLETE&&ge.status!==se.PROCESSING_REVERT_ERROR});return Promise.all(ce.map(B))}return Promise.all(ae.map(B))},Le=function(){for(var R=arguments.length,g=new Array(R),H=0;H<R;H++)g[H]=arguments[H];var ae=Array.isArray(g[0])?g[0]:g,ce;typeof ae[ae.length-1]=="object"?ce=ae.pop():Array.isArray(g[0])&&(ce=g[1]);var ge=Q();if(!ae.length)return Promise.all(ge.map(function(Te){return U(Te,ce)}));var Ee=ae.map(function(Te){return be(Te)?ge[Te]?ge[Te].id:null:Te}).filter(function(Te){return Te});return Ee.map(function(Te){return U(Te,ce)})},Re=Object.assign({},Jt(),{},P,{},ti(n,r),{setOptions:C,addFile:Ae,addFiles:z,getFile:ue,processFile:B,prepareFile:F,removeFile:U,moveFile:function(R,g){return n.dispatch("MOVE_ITEM",{query:R,index:g})},getFiles:Q,processFiles:Z,removeFiles:Le,prepareFiles:q,sort:function(R){return n.dispatch("SORT",{compare:R})},browse:function(){var R=f.element.querySelector("input[type=file]");R&&R.click()},destroy:function(){Re.fire("destroy",f.element),n.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",d),document.removeEventListener("visibilitychange",i),n.dispatch("DID_DESTROY")},insertBefore:function(R){return j(f.element,R)},insertAfter:function(R){return D(f.element,R)},appendTo:function(R){return R.appendChild(f.element)},replaceElement:function(R){j(f.element,R),R.parentNode.removeChild(R),t=R},restoreElement:function(){t&&(D(t,f.element),f.element.parentNode.removeChild(f.element),t=null)},isAttachedTo:function(R){return f.element===R||t===R},element:{get:function(){return f.element}},status:{get:function(){return n.query("GET_STATUS")}}});return n.dispatch("DID_INIT"),Se(Re)},Wn=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={};Y(er(),function(n,i){t[n]=i[0]});var r=as(Object.assign({},t,{},e));return r},os=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},ss=function(e){return xn(e.replace(/^data-/,""))},us=function a(e,t){Y(t,function(r,n){Y(e,function(i,o){var s=new RegExp(r),u=s.test(i);if(u&&(delete e[i],n!==!1)){if(y(n)){e[n]=o;return}var l=n.group;ve(n)&&!e[l]&&(e[l]={}),e[l][os(i.replace(s,""))]=o}}),n.mapping&&a(e[n.group],n.mapping)})},ls=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];Y(e.attributes,function(i){r.push(e.attributes[i])});var n=r.filter(function(i){return i.name}).reduce(function(i,o){var s=te(e,o.name);return i[ss(o.name)]=s===o.name?!0:s,i},{});return us(n,t),n},cs=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};_t("SET_ATTRIBUTE_TO_OPTION_MAP",r);var n=Object.assign({},t),i=ls(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,r);Object.keys(i).forEach(function(s){ve(i[s])?(ve(n[s])||(n[s]={}),Object.assign(n[s],i[s])):n[s]=i[s]}),n.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(function(s){return{source:s.value,options:{type:s.dataset.type}}}));var o=Wn(n);return e.files&&Array.from(e.files).forEach(function(s){o.addFile(s)}),o.replaceElement(e),o},fs=function(){return $(arguments.length<=0?void 0:arguments[0])?cs.apply(void 0,arguments):Wn.apply(void 0,arguments)},ds=["fire","_read","_write"],zn=function(e){var t={};return Vr(e,t,ds),t},ps=function(e,t){return e.replace(/(?:{([a-zA-Z]+)})/g,function(r,n){return t[n]})},vs=function(e){var t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(t),n=new Worker(r);return{transfer:function(o,s){},post:function(o,s,u){var l=vr();n.onmessage=function(c){c.data.id===l&&s(c.data.message)},n.postMessage({id:l,message:o},u)},terminate:function(){n.terminate(),URL.revokeObjectURL(r)}}},Es=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=function(i){r(i)},n.src=e})},jn=function(e,t){var r=e.slice(0,e.size,e.type);return r.lastModifiedDate=e.lastModifiedDate,r.name=t,r},gs=function(e){return jn(e,e.name)},Xn=[],ms=function(e){if(!Xn.includes(e)){Xn.push(e);var t=e({addFilter:pi,utils:{Type:h,forin:Y,isString:y,isFile:Ct,toNaturalFileSize:sn,replaceInString:ps,getExtensionFromFilename:rr,getFilenameWithoutExtension:Kr,guesstimateMimeType:wn,getFileFromBlob:bt,getFilenameFromURL:Ht,createRoute:T,createWorker:vs,createView:v,createItemAPI:et,loadImage:Es,copyFile:gs,renameFile:jn,createBlob:Xr,applyFilterChain:ot,text:He,getNumericAspectRatioFromString:Hr},views:{fileActionButton:on}});vi(t.options)}},Is=function(){return Object.prototype.toString.call(window.operamini)==="[object OperaMini]"},Ts=function(){return"Promise"in window},_s=function(){return"slice"in Blob.prototype},hs=function(){return"URL"in window&&"createObjectURL"in window.URL},Rs=function(){return"visibilityState"in document},Os=function(){return"performance"in window},As=function(){return"supports"in(window.CSS||{})},ys=function(){return/MSIE|Trident/.test(window.navigator.userAgent)},xr=function(){var a=ie()&&!Is()&&Rs()&&Ts()&&_s()&&hs()&&Os()&&(As()||ys());return function(){return a}}(),Et={apps:[]},Ds="filepond",yt=function(){};if(M.Status={},M.FileStatus={},M.FileOrigin={},M.OptionTypes={},M.create=yt,M.destroy=yt,M.parse=yt,M.find=yt,M.registerPlugin=yt,M.getOptions=yt,M.setOptions=yt,xr()){I(function(){Et.apps.forEach(function(a){return a._read()})},function(a){Et.apps.forEach(function(e){return e._write(a)})});var kn=function a(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:xr,create:M.create,destroy:M.destroy,parse:M.parse,find:M.find,registerPlugin:M.registerPlugin,setOptions:M.setOptions}})),document.removeEventListener("DOMContentLoaded",a)};document.readyState!=="loading"?setTimeout(function(){return kn()},0):document.addEventListener("DOMContentLoaded",kn);var $n=function(){return Y(er(),function(e,t){M.OptionTypes[e]=t[1]})};M.Status=Object.assign({},Mt),M.FileOrigin=Object.assign({},ze),M.FileStatus=Object.assign({},se),M.OptionTypes={},$n(),M.create=function(){var e=fs.apply(void 0,arguments);return e.on("destroy",M.destroy),Et.apps.push(e),zn(e)},M.destroy=function(e){var t=Et.apps.findIndex(function(n){return n.isAttachedTo(e)});if(t>=0){var r=Et.apps.splice(t,1)[0];return r.restoreElement(),!0}return!1},M.parse=function(e){var t=Array.from(e.querySelectorAll("."+Ds)),r=t.filter(function(n){return!Et.apps.find(function(i){return i.isAttachedTo(n)})});return r.map(function(n){return M.create(n)})},M.find=function(e){var t=Et.apps.find(function(r){return r.isAttachedTo(e)});return t?zn(t):null},M.registerPlugin=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(ms),$n()},M.getOptions=function(){var e={};return Y(er(),function(t,r){e[t]=r[0]}),e},M.setOptions=function(e){return ve(e)&&(Et.apps.forEach(function(t){t.setOptions(e)}),Ei(e)),M.getOptions()}}M.supported=xr,Object.defineProperty(M,"__esModule",{value:!0})})});export default Fs();
